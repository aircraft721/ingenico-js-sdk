/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./app.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./app.js":
/*!****************!*\
  !*** ./app.js ***!
  \****************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var connect = __webpack_require__(/*! connect-sdk-client-js/dist/connectsdk.noEncrypt */ \"./node_modules/connect-sdk-client-js/dist/connectsdk.noEncrypt.js\");\n\nvar sessionDetails = {\n    clientSessionID: 'afbceb760c9147e78c01c75d45a1772e',\n    customerId: '1868-4b5395f4fad543ecae072ae28b81eca0',\n    clientApiUrl: 'https://eu.sandbox.api-ingenico.com/client/v1',\n    assetUrl: '/'\n};\n\nvar paymentDetails = {\n    totalAmount: 10000,\n    countryCode: 'NL',\n    locale: 'en_US',\n    currency: 'EUR',\n    isRecurring: false\n};\n\nvar paymentProductSpecificInputs = {\n    androidPay: {\n        merchantId: \"<your Android Pay merchant id>\"\n    }\n};\n\nvar paymentProductId = \"809\";\n\nvar currencyCode = \"EUR\";\nvar countryCode = \"NL\";\n\nvar cardNumber = '4567 3500 0042 7977';\n\nvar session = new connect(sessionDetails);\n\nvar createPayload = function (session, cardNumber, paymentDetails) {\n    session.getIinDetails(cardNumber, paymentDetails).then(function (iinDetailsResponse) {\n        if (iinDetailsResponse.status !== \"SUPPORTED\") {\n            console.error(\"Card check error: \" + iinDetailsResponse.status);\n            document.querySelector('.output').innerText = 'Something went wrong, check the console for more information.';\n            return;\n        }\n        session.getPaymentProduct(iinDetailsResponse.paymentProductId, paymentDetails).then(function (paymentProduct) {\n            var paymentRequest = session.getPaymentRequest();\n            paymentRequest.setPaymentProduct(paymentProduct);\n            paymentRequest.setValue(\"cardNumber\", cardNumber);\n            paymentRequest.setValue(\"cvv\", \"123\");\n            paymentRequest.setValue(\"expiryDate\", \"04/20\");\n\n            if (!paymentRequest.isValid()) {\n                for (var error in paymentRequest.getErrorMessageIds()) {\n                    console.error('error', error);\n                }\n            }\n            session.getEncryptor().encrypt(paymentRequest).then(function (paymentHash) {\n                //public key\n                session.getPublicKey().then(function(publicKey) {\n                    console.log('publicKey', publicKey);\n                }, function(error) {\n                    console.log('error public key: ', error);\n                })\n                //payment product groups\n                session.getBasicPaymentProductGroups(paymentDetails).then(function (basicPaymentProductGroups) {\n                    console.log('basicPaymentProductGroups',basicPaymentProductGroups)\n                }, function (error) {\n                    console.log('error basic payment:', error)\n                });\n                //payment product group\n                session.getPaymentProductGroup('cards', paymentDetails).then(function (paymentProductGroup) {\n                    console.log('paymentProductGroup', paymentProductGroup);\n                }, function (error) {\n                    // Indicate that an error occurred\n                    console.log('paymentProductGroup: error: ', error);\n                });\n                //payment products specific inputs\n                session.getBasicPaymentProducts(paymentDetails, paymentProductSpecificInputs).then(function (basicPaymentProducts) {\n                    // Process basic payment products\n                    console.log('basicPaymentProducts', basicPaymentProducts)\n                }, function (error) {\n                    // Indicate that an error occurred\n                    console.log('basicPaymentProducts', error);\n                });\n                //get payment product details\n                session.getPaymentProduct(paymentProductId, paymentDetails, paymentProductSpecificInputs).then(function (paymentProduct) {\n                    // Process basic payment products\n                    console.log('paymentProduct', paymentProduct)\n                }, function (error) {\n                    // Indicate that an error occurred\n                    console.log('paymentProduct', error);\n                });\n                //ideal get payment product directory\n                session.getPaymentProductDirectory(paymentProductId, currencyCode, countryCode).then(function (paymentProductDirectory) {\n                    console.log('paymentProductDirectory', paymentProductDirectory);\n                }, function (error) {\n                    console.log(error);\n                });\n\n                document.querySelector('.output').innerText = 'Encrypted to: ' + paymentHash;\n            }, function (errors) {\n                console.error('Failed encrypting the payload, check your credentials');\n                document.querySelector('.output').innerText = 'Something went wrong, check the console for more information.';\n            });\n\n        }, function () {\n            console.error('Failed getting payment product, check your credentials');\n            document.querySelector('.output').innerText = 'Something went wrong, check the console for more information.';\n        });\n\n    }, \n    function () {\n        console.error('Failed getting IinDetails, check your credentials');\n        document.querySelector('.output').innerText = 'Something went wrong, check the console for more information.';\n    });\n}\n\ncreatePayload(session, cardNumber, paymentDetails);\n\n\n//# sourceURL=webpack:///./app.js?");

/***/ }),

/***/ "./node_modules/connect-sdk-client-js/dist/connectsdk.noEncrypt.js":
/*!*************************************************************************!*\
  !*** ./node_modules/connect-sdk-client-js/dist/connectsdk.noEncrypt.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_0__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_1__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_2__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_3__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_4__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_5__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_6__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_7__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_8__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_9__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_10__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_11__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_12__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_13__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_14__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_15__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_16__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_17__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_18__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_19__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_20__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_21__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_22__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_23__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_24__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_25__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_26__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_27__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_28__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_29__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_30__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_31__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_32__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_33__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_34__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_35__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_36__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_37__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_38__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_39__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_40__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_41__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_42__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_43__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_44__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global) {\n    var connectsdk = {}, modules = {};\n\n    /* SDK internal function */\n    connectsdk.define = function (module, dependencies, fn) {\n        if (dependencies && dependencies.length) {\n            for (var i = 0; i < dependencies.length; i++) {\n                dependencies[i] = modules[dependencies[i]];\n            }\n        }\n        modules[module] = fn.apply(this, dependencies || []);\n    };\n\n    // Export `connectsdk` based on environment.\n    global.connectsdk = connectsdk;\n\n    if (true) {\n        exports.connectsdk = connectsdk;\n    }\n\n    connectsdk.define('connectsdk.core', [], function () {\n        return connectsdk;\n    });\n\n    // use require.js if available otherwise we use our own\n    if (false) {}\n} (typeof window === 'undefined' ? this : window));\n\n// (re)define core\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_LOCAL_MODULE_0__ = ((function () {\n    var global = typeof window === 'undefined' ? this : window;\n    var connectsdk = {};\n    global.connectsdk = connectsdk;\n    if (true) {\n        exports.connectsdk = connectsdk;\n    }\n    return connectsdk;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_1__ = ((function(turing) {\n\tfunction PromiseModule(global) {\n\t\t/**\n\t\t * The Promise class.\n\t\t */\n\t\tfunction Promise(singleton) {\n\t\t\tvar self = this;\n\t\t\tthis.pending = [];\n\n\t\t\t/**\n\t\t\t * Resolves a promise.\n\t\t\t *\n\t\t\t * @param {Object} A value\n\t\t\t */\n\t\t\tthis.resolve = function(result) {\n\t\t\t\tself.complete('resolve', result);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Rejects a promise.\n\t\t\t *\n\t\t\t * @param {Object} A value\n\t\t\t */\n\t\t\tthis.reject = function(result) {\n\t\t\t\tself.complete('reject', result);\n\t\t\t};\n\n\t\t\tif (singleton) {\n\t\t\t\tthis.isSingleton = true;\n\t\t\t}\n\t\t}\n\n\n\t\tPromise.prototype = {\n\t\t\t/**\n\t\t\t * Adds a success and failure handler for completion of this Promise object.\n\t\t\t *\n\t\t\t * @param {Function} success The success handler\n\t\t\t * @param {Function} success The failure handler\n\t\t\t * @returns {Promise} `this`\n\t\t\t */\n\t\t\tthen : function(success, failure) {\n\t\t\t\tthis.pending.push({\n\t\t\t\t\tresolve : success,\n\t\t\t\t\treject : failure\n\t\t\t\t});\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Runs through each pending 'thenable' based on type (resolve, reject).\n\t\t\t *\n\t\t\t * @param {String} type The thenable type\n\t\t\t * @param {Object} result A value\n\t\t\t */\n\t\t\tcomplete : function(type, result) {\n\t\t\t\twhile (this.pending[0]) {\n\t\t\t\t\tthis.pending.shift()[type](result);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tglobal.Promise = Promise;\n\t}\n\tPromiseModule(connectsdk);\n\n\treturn connectsdk.Promise;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_2__ = ((function(connectsdk) {\n  var net = {};\n\n  /**\n    * Ajax request options:\n    *\n    *   - `method`: {String} HTTP method - GET, POST, etc.\n    *   - `success`: {Function} A callback to run when a request is successful\n    *   - `error`: {Function} A callback to run when the request fails\n    *   - `asynchronous`: {Boolean} Defaults to asynchronous\n    *   - `postBody`: {String} The HTTP POST body\n    *   - `contentType`: {String} The content type of the request, default is `application/x-www-form-urlencoded`\n    *\n    */\n\n  /**\n    * Removes leading and trailing whitespace.\n    * @param {String}\n    * @return {String}\n    */\n  var trim = ''.trim\n    ? function(s) { return s.trim(); }\n    : function(s) { return s.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''); };\n\n  function xhr() {\n    if (typeof XMLHttpRequest !== 'undefined' && (window.location.protocol !== 'file:' || !window.ActiveXObject)) {\n      return new XMLHttpRequest();\n    } else {\n      try {\n        return new ActiveXObject('Msxml2.XMLHTTP.6.0');\n      } catch(e) { }\n      try {\n        return new ActiveXObject('Msxml2.XMLHTTP.3.0');\n      } catch(e) { }\n      try {\n        return new ActiveXObject('Msxml2.XMLHTTP');\n      } catch(e) { }\n    }\n    return false;\n  }\n\n  function successfulRequest(request) {\n    return (request.status >= 200 && request.status < 300) ||\n        request.status == 304 ||\n        (request.status == 0 && request.responseText);\n  }\n\n  /**\n    * Serialize JavaScript for HTTP requests.\n    *\n    * @param {Object} object An Array or Object\n    * @returns {String} A string suitable for a GET or POST request\n    */\n  net.serialize = function(object) {\n    if (!object) return;\n\n    if (typeof object === 'string') {\n      return object;\n    }\n\n    var results = [];\n    for (var key in object) {\n      results.push(encodeURIComponent(key) + '=' + encodeURIComponent(object[key]));\n    }\n    return results.join('&');\n  };\n\n  /**\n    * JSON.parse support can be inferred using `connectsdk.detect('JSON.parse')`.\n    */\n  //connectsdk.addDetectionTest('JSON.parse', function() {\n  //  return window.JSON && window.JSON.parse;\n  //});\n\n  /**\n    * Parses JSON represented as a string.\n    *\n    * @param {String} string The original string\n    * @returns {Object} A JavaScript object\n    */\n  net.parseJSON = function(string) {\n    if (typeof string !== 'string' || !string) return null;\n    string = trim(string);\n    /*\n    return connectsdk.detect('JSON.parse') ?\n      window.JSON.parse(string) :\n      (new Function('return ' + string))();\n    */\n    return window.JSON.parse(string);\n  };\n\n  /**\n    * Parses XML represented as a string.\n    *\n    * @param {String} string The original string\n    * @returns {Object} A JavaScript object\n    */\n  if (window.DOMParser) {\n    net.parseXML = function(text) {\n      return new DOMParser().parseFromString(text, 'text/xml');\n    };\n  } else {\n    net.parseXML = function(text) {\n      var xml = new ActiveXObject('Microsoft.XMLDOM');\n      xml.async = 'false';\n      xml.loadXML(text);\n      return xml;\n    };\n  }\n\n  /**\n    * Creates an Ajax request.  Returns an object that can be used\n    * to chain calls.  For example:\n    *\n    *      $t.post('/post-test')\n    *        .data({ key: 'value' })\n    *        .end(function(res) {\n    *          assert.equal('value', res.responseText);\n    *        });\n    *\n    *      $t.get('/get-test')\n    *        .set('Accept', 'text/html')\n    *        .end(function(res) {\n    *          assert.equal('Sample text', res.responseText);\n    *        });\n    *\n    * The available chained methods are:\n    *\n    * `set` -- set a HTTP header\n    * `data` -- the postBody\n    * `end` -- send the request over the network, and calls your callback with a `res` object\n    * `send` -- sends the request and calls `data`: `.send({ data: value }, function(res) { });`\n    *\n    * @param {String} The URL to call\n    * @param {Object} Optional settings\n    * @returns {Object} A chainable object for further configuration\n    */\n  function ajax(url, options) {\n    var request = xhr(),\n        promise,\n        then,\n        response = {},\n        chain;\n    if (connectsdk.Promise) {\n      promise = new connectsdk.Promise();\n    }\n\n\n    function respondToReadyState(readyState) {\n      if (request.readyState == 4) {\n        var contentType = request.mimeType || request.getResponseHeader('content-type') || '';\n\n        response.status = request.status;\n        response.responseText = request.responseText;\n        if (/json/.test(contentType)) {\n          response.responseJSON = net.parseJSON(request.responseText);\n        } else if (/xml/.test(contentType)) {\n          response.responseXML = net.parseXML(request.responseText);\n      \t}\n\n        response.success = successfulRequest(request);\n\n        if (options.callback) {\n          return options.callback(response, request);\n        }\n\n        if (response.success) {\n          if (options.success) options.success(response, request);\n          if (promise) promise.resolve(response, request);\n        } else {\n          if (options.error) options.error(response, request);\n          if (promise) promise.reject(response, request);\n        }\n      }\n    }\n\n    // Set the HTTP headers\n    function setHeaders() {\n      var defaults = {\n        'Accept': 'text/javascript, application/json, text/html, application/xml, text/xml, */*',\n        'Content-Type': 'application/json'\n      };\n\n      /**\n       * Merge headers with defaults.\n       */\n      for (var name in defaults) {\n        if (!options.headers.hasOwnProperty(name))\n          options.headers[name] = defaults[name];\n      }\n      for (var name in options.headers) {\n        request.setRequestHeader(name, options.headers[name]);\n      }\n\n    }\n\n    if (typeof options === 'undefined') options = {};\n\n    options.method = options.method ? options.method.toLowerCase() : 'get';\n    options.asynchronous = options.asynchronous || true;\n    options.postBody = options.postBody || '';\n    request.onreadystatechange = respondToReadyState;\n    request.open(options.method, url, options.asynchronous);\n\n    options.headers = options.headers || {};\n    if (options.contentType) {\n      options.headers['Content-Type'] = options.contentType;\n    }\n\n    if (typeof options.postBody !== 'string') {\n      // Serialize JavaScript\n      options.postBody = net.serialize(options.postBody);\n    }\n\n    // setHeaders();\n\n    function send() {\n      try {\n      \tsetHeaders();\n        request.send(options.postBody);\n      } catch (e) {\n        if (options.error) {\n          options.error();\n        }\n      }\n    }\n\n    chain = {\n      set: function(key, value) {\n        options.headers[key] = value;\n        return chain;\n      },\n\n      send: function(data, callback) {\n        options.postBody = net.serialize(data);\n        options.callback = callback;\n        send();\n        return chain;\n      },\n\n      end: function(callback) {\n        options.callback = callback;\n        send();\n        return chain;\n      },\n\n      data: function(data) {\n        options.postBody = net.serialize(data);\n        return chain;\n      },\n\n      then: function() {\n        chain.end();\n        if (promise) promise.then.apply(promise, arguments);\n        return chain;\n      }\n    };\n\n    return chain;\n  }\n\n  function JSONPCallback(url, success, failure) {\n    var self = this;\n    this.url = url;\n    this.methodName = '__connectsdk_jsonp_' + parseInt(new Date().getTime());\n    this.success = success;\n    this.failure = failure;\n\n    function runCallback(json) {\n      self.success(json);\n      self.teardown();\n    }\n\n    window[this.methodName] = runCallback;\n  }\n\n  JSONPCallback.prototype.run = function() {\n    this.scriptTag = document.createElement('script');\n    this.scriptTag.id = this.methodName;\n    this.scriptTag.src = this.url.replace('{callback}', this.methodName);\n    var that = this;\n    this.scriptTag.onerror = function() {\n    \tthat.failure();\n    };\n    document.body.appendChild(this.scriptTag);\n  };\n\n  JSONPCallback.prototype.teardown = function() {\n    window[this.methodName] = null;\n    try {\n    \tdelete window[this.methodName];\n    } catch (e) {}\n    if (this.scriptTag) {\n      document.body.removeChild(this.scriptTag);\n    }\n  };\n\n  /**\n   * An Ajax GET request.\n   *\n   *      $t.get('/get-test')\n   *        .set('Accept', 'text/html')\n   *        .end(function(res) {\n   *          assert.equal('Sample text', res.responseText);\n   *        });\n   *\n   * @param {String} url The URL to request\n   * @param {Object} options The Ajax request options\n   * @returns {Object} A chainable object for further configuration\n   */\n  net.get = function(url, options) {\n    if (typeof options === 'undefined') options = {};\n    options.method = 'get';\n    return ajax(url, options);\n  };\n\n  /**\n   * An Ajax POST request.\n   *\n   *      $t.post('/post-test')\n   *        .data({ key: 'value' })\n   *        .end(function(res) {\n   *          assert.equal('value', res.responseText);\n   *        });\n   *\n   * @param {String} url The URL to request\n   * @param {Object} options The Ajax request options (`postBody` may come in handy here)\n   * @returns {Object} An object for further chaining with promises\n   */\n  net.post = function(url, options) {\n    if (typeof options === 'undefined') options = {};\n    options.method = 'post';\n    return ajax(url, options);\n  };\n\n  /**\n   * A jsonp request.  Example:\n   *\n   *     var url = 'http://feeds.delicious.com/v1/json/';\n   *     url += 'alex_young/javascript?callback={callback}';\n   *\n   *     connectsdk.net.jsonp(url, {\n   *       success: function(json) {\n   *         console.log(json);\n   *       }\n   *     });\n   *\n   * @param {String} url The URL to request\n   */\n  net.jsonp = function(url, options) {\n    if (typeof options === 'undefined') options = {};\n    var callback = new JSONPCallback(url, options.success, options.failure);\n    callback.run();\n  };\n\n  /**\n    * The Ajax methods are mapped to the `connectsdk` object:\n    *\n    *      connectsdk.get();\n    *      connectsdk.post();\n    *      connectsdk.json();\n    *\n    */\n  connectsdk.get = net.get;\n  connectsdk.post = net.post;\n  connectsdk.jsonp = net.jsonp;\n\n  net.ajax = ajax;\n  connectsdk.net = net;\n  return net;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_3__ = ((function (connectsdk) {\n\n\t// Create a singleton from Util so the same util function can be used in different modules\n\tvar Util = (function () {\n\t\tvar instance;\n\n\t\tfunction createInstance() {\n\t\t\t// private variables to use in the public methods\n\t\t\tvar applePayPaymentProductId = 302;\n\t\t\tvar androidPayPaymentProductId = 320;\n\t\t\tvar bancontactPaymentProductId = 3012;\n\n\t\t\treturn {\n\t\t\t\tapplePayPaymentProductId: applePayPaymentProductId,\n\t\t\t\tandroidPayPaymentProductId: androidPayPaymentProductId,\n\t\t\t\tbancontactPaymentProductId: bancontactPaymentProductId,\n\t\t\t\tgetMetadata: function () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tscreenSize: window.innerWidth + \"x\" + window.innerHeight,\n\t\t\t\t\t\tplatformIdentifier: window.navigator.userAgent,\n\t\t\t\t\t\tsdkIdentifier: ((document.GC && document.GC.rppEnabledPage) ? 'rpp-' : '') + 'JavaScriptClientSDK/v3.9.3',\n\t\t\t\t\t\tsdkCreator: 'Ingenico'\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tbase64Encode: function (data) {\n\t\t\t\t\tif (typeof data === \"object\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tdata = JSON.stringify(data);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tthrow \"data must be either a String or a JSON object\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\t\t\t\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc = '', tmp_arr = [];\n\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\n\n\t\t\t\t\tdo {// pack three octets into four hexets\n\t\t\t\t\t\to1 = data.charCodeAt(i++);\n\t\t\t\t\t\to2 = data.charCodeAt(i++);\n\t\t\t\t\t\to3 = data.charCodeAt(i++);\n\n\t\t\t\t\t\tbits = o1 << 16 | o2 << 8 | o3;\n\n\t\t\t\t\t\th1 = bits >> 18 & 0x3f;\n\t\t\t\t\t\th2 = bits >> 12 & 0x3f;\n\t\t\t\t\t\th3 = bits >> 6 & 0x3f;\n\t\t\t\t\t\th4 = bits & 0x3f;\n\n\t\t\t\t\t\t// use hexets to index into b64, and append result to encoded string\n\t\t\t\t\t\ttmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n\t\t\t\t\t} while (i < data.length);\n\n\t\t\t\t\tenc = tmp_arr.join('');\n\n\t\t\t\t\tvar r = data.length % 3;\n\n\t\t\t\t\treturn (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n\t\t\t\t},\n\t\t\t\tfilterOutProductsThatAreNotSupportedInThisBrowser: function (json) {\n\t\t\t\t\tfor (var i = json.paymentProducts.length - 1, il = 0; i >= il; i--) {\n\t\t\t\t\t\tvar product = json.paymentProducts[i];\n\t\t\t\t\t\tif (product && this.paymentProductsThatAreNotSupportedInThisBrowser.indexOf(product.id) > -1) {\n\t\t\t\t\t\t\tjson.paymentProducts.splice(i, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpaymentProductsThatAreNotSupportedInThisBrowser: [applePayPaymentProductId]\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tgetInstance: function () {\n\t\t\t\tif (!instance) {\n\t\t\t\t\tinstance = createInstance();\n\t\t\t\t}\n\t\t\t\treturn instance;\n\t\t\t}\n\t\t};\n\t})();\n\n\tconnectsdk.Util = Util;\n\treturn Util;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_1__, __WEBPACK_LOCAL_MODULE_3__], __WEBPACK_LOCAL_MODULE_4__ = ((function (connectsdk, Promise, Util) {\n\n    var _util = Util.getInstance();\n    var _C2SCommunicator = null;\n    var _paymentProductSpecificInputs = null;\n    var _context = null;\n\n    var setupRequestMethodData = function (networks, publicKey) {\n        var androidPayEnvironment = 'TEST';\n        if (_context.environment === 'PROD') {\n            androidPayEnvironment = 'PROD';\n        }\n        var methodData = [{\n            supportedMethods: ['https://android.com/pay'],\n            data: {\n                merchantId: _paymentProductSpecificInputs.androidPay.merchantId,\n                environment: androidPayEnvironment,\n                allowedCardNetworks: networks,\n                paymentMethodTokenizationParameters: {\n                    tokenizationType: 'NETWORK_TOKEN',\n                    parameters: {\n                        'publicKey': publicKey\n                    }\n                }\n            }\n        }];\n        return methodData;\n    }\n\n    var setupRequestDetails = function () {\n        var totalAmount = (_context.totalAmount / 100).toFixed(2);\n\n        var details = {\n            total: {\n                label: 'Total',\n                amount: {\n                    currency: _context.currency,\n                    value: totalAmount\n                }\n            }\n        };\n        return details;\n    }\n\n    var setupRequestOptions = function () {\n        var options = {\n            requestShipping: false,\n            requestPayerEmail: false,\n            requestPayerPhone: false,\n            requestPayerName: false\n        };\n        return options;\n    }\n\n    var _doCanMakePayment = function (jsonNetworks, jsonPublicKey) {\n        var promise = new Promise();\n\n        var methodData = setupRequestMethodData(jsonNetworks.networks, jsonPublicKey.publicKey);\n        var details = setupRequestDetails();\n        var options = setupRequestOptions();\n        var request = new PaymentRequest(methodData, details, options);\n        setTimeout(function () {\n            // When the PRAPI is available, it does not mean the canMakePayment() method is also implemented.\n            if (request.canMakePayment) {\n                request.canMakePayment().then(function (result) {\n                    if (result) {\n                        promise.resolve(true);\n                    } else {\n                        promise.resolve(false);\n                    }\n                })['catch'](function (error) { // we use ['catch'] notation intead of .catch because of IE8 compatibility\n                    promise.reject(error);\n                });\n            } else {\n                promise.resolve(true);\n            }\n        });\n        return promise;\n    }\n\n    var _checkPaymentProductPublicKey = function () {\n        var promise = new Promise();\n        _C2SCommunicator.getPaymentProductPublicKey(_util.androidPayPaymentProductId).then(function (jsonPublicKey) {\n            promise.resolve(jsonPublicKey);\n        }, function () {\n            promise.reject();\n        });\n        return promise;\n    }\n\n    var _checkPaymentProductNetworks = function () {\n        var promise = new Promise();\n        _C2SCommunicator.getPaymentProductNetworks(_util.androidPayPaymentProductId, _context).then(function (jsonNetworks) {\n            if (jsonNetworks.networks && jsonNetworks.networks.length > 0) {\n                promise.resolve(jsonNetworks);\n            } else {\n                promise.reject();\n            }\n        }, function () {\n            promise.reject();\n        });\n        return promise;\n    }\n\n    var _isPaymentRequestAPIAvailable = function () {\n        return window && window.PaymentRequest;\n    }\n\n    var AndroidPay = function (C2SCommunicator) {\n        _C2SCommunicator = C2SCommunicator;\n        this.isAndroidPayAvailable = function (context, paymentProductSpecificInputs) {\n            _context = context;\n            _paymentProductSpecificInputs = paymentProductSpecificInputs;\n            var promise = new Promise();\n            setTimeout(function () {\n                if (_isPaymentRequestAPIAvailable()) {\n                    _checkPaymentProductNetworks().then(function (jsonNetworks) {\n                        _checkPaymentProductPublicKey().then(function (jsonPublicKey) {\n                            _doCanMakePayment(jsonNetworks, jsonPublicKey).then(function (isAndroidPayAvailable) {\n                                if (!isAndroidPayAvailable) {\n                                    _util.paymentProductsThatAreNotSupportedInThisBrowser.push(_util.androidPayPaymentProductId);\n                                }\n                                promise.resolve(isAndroidPayAvailable);\n                            }, function () {\n                                _util.paymentProductsThatAreNotSupportedInThisBrowser.push(_util.androidPayPaymentProductId);\n                                promise.reject('failed to run canMakePayment() check with the payment request API');\n                            });\n                        }, function () {\n                            _util.paymentProductsThatAreNotSupportedInThisBrowser.push(_util.androidPayPaymentProductId);\n                            promise.reject('failed to retrieve payment product publickey');\n                        });\n                    }, function () {\n                        _util.paymentProductsThatAreNotSupportedInThisBrowser.push(_util.androidPayPaymentProductId);\n                        promise.reject('failed to retrieve paymentproduct networks');\n                    });\n                } else {\n                    _util.paymentProductsThatAreNotSupportedInThisBrowser.push(_util.androidPayPaymentProductId);\n                    promise.reject('Payment Request API is not available');\n                }\n            });\n            return promise;\n        }\n\n        this.isMerchantIdProvided = function (paymentProductSpecificInputs) {\n            if (paymentProductSpecificInputs.androidPay.merchantId) {\n                return paymentProductSpecificInputs.androidPay.merchantId;\n            } else {\n                _util.paymentProductsThatAreNotSupportedInThisBrowser.push(_util.androidPayPaymentProductId);\n                return false;\n            }\n        }\n    };\n    connectsdk.AndroidPay = AndroidPay;\n    return AndroidPay;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_5__ = ((function(connectsdk) {\n\n\tvar PublicKeyResponse = function(json) {\n\t\tthis.json = json;\n\t\tthis.keyId = json.keyId;\n\t\tthis.publicKey = json.publicKey;\n\t};\n\n\tconnectsdk.PublicKeyResponse = PublicKeyResponse;\n\treturn PublicKeyResponse;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_6__ = ((function(connectsdk) {\n\n\tvar PaymentProductPublicKeyResponse = function(json) {\n\t\tthis.json = json;\n\t\tthis.keyId = json.keyId;\n\t\tthis.publicKey = json.publicKey;\n\t};\n\n\tconnectsdk.PaymentProductPublicKeyResponse = PaymentProductPublicKeyResponse;\n\treturn PaymentProductPublicKeyResponse;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_7__ = ((function (connectsdk) {\n\n    var C2SCommunicatorConfiguration = function (sessionDetails, apiVersion) {\n        this.endpoints = {\n            PROD: {\n                EU: {\n                    API: \"https://ams1.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay1.secured-by-ingenico.com\"\n                },\n                US: {\n                    API: \"https://us.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay2.secured-by-ingenico.com\"\n                },\n                AMS: {\n                    API: \"https://ams2.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay3.secured-by-ingenico.com\"\n                },\n                PAR: {\n                    API: \"https://par.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay4.secured-by-ingenico.com\"\n                }\n            },\n            PREPROD: {\n                EU: {\n                    API: \"https://ams1.preprod.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay1.preprod.secured-by-ingenico.com\"\n                },\n                US: {\n                    API: \"https://us.preprod.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay2.preprod.secured-by-ingenico.com\"\n                },\n                AMS: {\n                    API: \"https://ams2.preprod.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay3.preprod.secured-by-ingenico.com\"\n                },\n                PAR: {\n                    API: \"https://par-preprod.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay4.preprod.secured-by-ingenico.com\"\n                }\n            },\n            SANDBOX: {\n                EU: {\n                    API: \"https://ams1.sandbox.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay1.sandbox.secured-by-ingenico.com\"\n                },\n                US: {\n                    API: \"https://us.sandbox.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay2.sandbox.secured-by-ingenico.com\"\n                },\n                AMS: {\n                    API: \"https://ams2.sandbox.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay3.sandbox.secured-by-ingenico.com\"\n                },\n                PAR: {\n                    API: \"https://par.sandbox.api-ingenico.com/client/v1\",\n                    ASSETS: \"https://assets.pay4.sandbox.secured-by-ingenico.com\"\n                }\n            }\n\n            // Non public settings. Only needed in GC development environment. Do not use\n            // these, they will not work outside GC.\n            ,\n            INTEGRATION: {\n                EU: {\n                    API: \"https://int-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.int-test-rpp.gcsip.nl:4443\"\n                },\n                US: {\n                    API: \"https://int-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.int-test-rpp.gcsip.nl:4443\"\n                },\n                AMS: {\n                    API: \"https://int-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.int-test-rpp.gcsip.nl:4443\"\n                },\n                PAR: {\n                    API: \"https://int-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.int-test-rpp.gcsip.nl:4443\"\n                }\n            },\n            DEV_NAMI: {\n                EU: {\n                    API: \"https://nami-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.nami-test-rpp.gcsip.nl:4443\"\n                },\n                US: {\n                    API: \"https://nami-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.nami-test-rpp.gcsip.nl:4443\"\n                },\n                AMS: {\n                    API: \"https://nami-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.nami-test-rpp.gcsip.nl:4443\"\n                },\n                PAR: {\n                    API: \"https://nami-test-api.gcsip.nl:4443/client/v1\",\n                    ASSETS: \"https://assets.nami-test-rpp.gcsip.nl:4443\"\n                }\n            },\n            DEV_ISC: {\n                EU: {\n                    API: \"//api.gc-dev.isaac.local/client/v1\",\n                    ASSETS: \"//rpp.gc-dev.isaac.local\"\n                },\n                US: {\n                    API: \"//api.gc-ci-dev.isaac.local/client/v1\",\n                    ASSETS: \"//rpp.gc-ci-dev.isaac.local\"\n                },\n                AMS: {\n                    API: \"//api.gc-dev.isaac.local/client/v1\",\n                    ASSETS: \"//rpp.gc-dev.isaac.local\"\n                },\n                PAR: {\n                    API: \"//api.gc-dev.isaac.local/client/v1\",\n                    ASSETS: \"//rpp.gc-dev.isaac.local\"\n                }\n            }\n        };\n\n        // clientSessionID, assetBaseUrl and apiBaseUrl are deprecated but still may be used. Here we check for presense of new variables, if they dont exist... Use the old variables.\n        if (!sessionDetails.clientSessionId) {\n            sessionDetails.clientSessionId = sessionDetails.clientSessionID;\n        } else if (sessionDetails.clientSessionID) {\n            throw new Error(\"You cannot use both the clientSessionId and the clientSessionID at the same time, please use the clientSessionId only.\");\n        }\n        if (!sessionDetails.assetUrl) {\n            sessionDetails.assetUrl = sessionDetails.assetsBaseUrl\n        } else if (sessionDetails.assetsBaseUrl) {\n            throw new Error(\"You cannot use both the assetUrl and the assetsBaseUrl at the same time, please use the assetUrl only.\");\n        }\n        if (!sessionDetails.clientApiUrl) {\n            sessionDetails.clientApiUrl = sessionDetails.apiBaseUrl\n        } else if (sessionDetails.apiBaseUrl) {\n            throw new Error(\"You cannot use both the clientApiUrl and the apiBaseUrl at the same time, please use the clientApiUrl only.\");\n        }\n\n        this.clientSessionId = sessionDetails.clientSessionId;\n        this.customerId = sessionDetails.customerId;\n\n        // can be removed in a newer version of the SDK from this line\n        if (sessionDetails.region && !sessionDetails.clientApiUrl) {\n            // use regions; old stuff\n            console.warn(\"Using regions is deprecated, switch to clientApiUrl\");\n            this.clientApiUrl = this.endpoints[sessionDetails.environment][sessionDetails.region].API;\n            this.assetUrl = this.endpoints[sessionDetails.environment][sessionDetails.region].ASSETS;\n        } else {\n            // till this line; normal behaviour is below\n            // ignore the region here\n            this.clientApiUrl = sessionDetails.clientApiUrl;\n            this.assetUrl = sessionDetails.assetUrl;\n            if (!this.clientApiUrl) {\n                throw new Error(\"This version of the connectSDK requires an clientApiUrl, which you did not provide.\");\n            }\n            if (!this.assetUrl) {\n                throw new Error(\"This version of the connectSDK requires an assetUrl, which you did not provide.\");\n            }\n\n            // now that the clientApiUrl is set check when if the api version is set in the URL, its the correct version break if not.\n            if (this.clientApiUrl.indexOf(\"//\") === -1) {\n                throw new Error(\"A valid URL is required for the clientApiUrl, you provided '\" + this.clientApiUrl + \"'\");\n            }\n            var tester = this.clientApiUrl.split(\"/\"); // [0] = (http(s): || \"\") , [1] = \"\", [2] = \"host:port\", [3+] = path\n            if (tester[0] !== \"\" && tester[0].indexOf(\"http\") !== 0) {\n                throw new Error(\"A valid URL is required for the clientApiUrl, you provided '\" + this.clientApiUrl + \"'\");\n            }\n            // if you cannot provide an URL that starts with (http(s)::)// and want an error: please provide a PR :)\n\n            var path = tester.splice(3).join(\"/\"); // the path (if no path; path = \"\").\n            if (!path) { //If path == \"\"\n                this.clientApiUrl += \"/\" + apiVersion;\n            } else if (path === 'client') { //If path == client\n                this.clientApiUrl += \"/\" + apiVersion.split('/')[1];\n            } else if (path.indexOf(apiVersion) !== 0 || path.length !== apiVersion.length) {\n                throw new Error(\"This version of the connectSDK is only compatible with \" + apiVersion + \", you supplied: '\" + path + \"'\");\n            }\n        }\n    };\n    connectsdk.C2SCommunicatorConfiguration = C2SCommunicatorConfiguration;\n    return C2SCommunicatorConfiguration;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_1__], __WEBPACK_LOCAL_MODULE_8__ = ((function(connectsdk, Promise) {\n\n\tvar IinDetailsResponse = function () {\n\t\tthis.status = '';\n\t\tthis.countryCode = '';\n\t\tthis.paymentProductId = '';\n\t\tthis.isAllowedInContext = '';\n\t\tthis.coBrands = [];\n\t};\n\tconnectsdk.IinDetailsResponse = IinDetailsResponse;\n\treturn IinDetailsResponse;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_1__, __WEBPACK_LOCAL_MODULE_2__, __WEBPACK_LOCAL_MODULE_3__, __WEBPACK_LOCAL_MODULE_5__, __WEBPACK_LOCAL_MODULE_6__, __WEBPACK_LOCAL_MODULE_8__, __WEBPACK_LOCAL_MODULE_4__], __WEBPACK_LOCAL_MODULE_9__ = ((function (connectsdk, Promise, Net, Util, PublicKeyResponse, PaymentProductPublicKeyResponse, IinDetailsResponse, AndroidPay) {\n\tvar C2SCommunicator = function (c2SCommunicatorConfiguration, paymentProduct) {\n\t\tvar _c2SCommunicatorConfiguration = c2SCommunicatorConfiguration;\n\t\tvar _util = Util.getInstance();\n\t\tvar _cache = {};\n\t\tvar _providedPaymentProduct = paymentProduct;\n\t\tvar that = this;\n\t\tvar _AndroidPay = new AndroidPay(that);\n\n\t\tvar _mapType = {\n\t\t\t\"expirydate\": \"tel\",\n\t\t\t\"string\": \"text\",\n\t\t\t\"numericstring\": \"tel\",\n\t\t\t\"integer\": \"number\",\n\t\t\t\"expirationDate\": \"tel\"\n\t\t};\n\n\t\tvar formatUrl = function (url) {\n\t\t\treturn (url && endsWith(url, '/')) ? url : url + '/';\n\t\t}\n\n\t\tvar endsWith = function(string, suffix) {\n\t\t\treturn string.indexOf(suffix, string.length - suffix.length) !== -1;\n\t\t};\n\n\t\tvar _cleanJSON = function (json, url) {\n\t\t\tfor (var i = 0, il = json.fields.length; i < il; i++) {\n\t\t\t\tvar field = json.fields[i];\n\t\t\t\tfield.type = (field.displayHints.obfuscate) ? \"password\" : _mapType[field.type];\n\n\t\t\t\t// helper code for templating tools like Handlebars\n\t\t\t\tfor (validatorKey in field.dataRestrictions.validators) {\n\t\t\t\t\tfield.validators = field.validators || [];\n\t\t\t\t\tfield.validators.push(validatorKey);\n\t\t\t\t}\n\t\t\t\tif (field.displayHints.formElement && field.displayHints.formElement.type === 'list') {\n\t\t\t\t\tfield.displayHints.formElement.list = true;\n\t\t\t\t}\n\n\t\t\t\t// full image paths\n\t\t\t\tif (field.displayHints.tooltip && field.displayHints.tooltip.image) {\n\t\t\t\t\tfield.displayHints.tooltip.image = formatUrl(url) + field.displayHints.tooltip.image;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// The server orders in a different way, so we apply the sortorder\n\t\t\tjson.fields.sort(function (a, b) {\n\t\t\t\tif (a.displayHints.displayOrder < b.displayHints.displayOrder) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\t// set full image path\n\t\t\tjson.displayHints.logo = formatUrl(url) + json.displayHints.logo;\n\t\t\treturn json;\n\t\t};\n\n\t\tvar _extendLogoUrl = function (json, url, postfix) {\n\t\t\tfor (var i = 0, il = json[\"paymentProduct\" + postfix].length; i < il; i++) {\n\t\t\t\tvar product = json[\"paymentProduct\" + postfix][i];\n\t\t\t\tproduct.displayHints.logo = formatUrl(url) + product.displayHints.logo;\n\t\t\t}\n\t\t\tjson[\"paymentProduct\" + postfix].sort(function (a, b) {\n\t\t\t\tif (a.displayHints.displayOrder < b.displayHints.displayOrder) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\treturn json;\n\t\t};\n\n\t\tvar _isPaymentProductInList = function (list, paymentProductId) {\n\t\t\tfor (var i = list.length - 1, il = 0; i >= il; i--) {\n\t\t\t\tvar product = list[i];\n\t\t\t\tif (product && (product.id === paymentProductId)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tvar metadata = _util.getMetadata();\n\n\t\tthis.getBasicPaymentProducts = function (context, paymentProductSpecificInputs) {\n\t\t\tvar cacheKeyLocale= context.locale ? context.locale + \"_\" : '';\n\t\t\tvar paymentProductSpecificInputs = paymentProductSpecificInputs || {};\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProducts-\" + context.totalAmount + \"_\" + context.countryCode + \"_\"\n\t\t\t\t\t+ cacheKeyLocale + context.isRecurring + \"_\" + context.currency + \"_\" + JSON.stringify(paymentProductSpecificInputs);\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tvar urlParameterLocale = context.locale ? \"&locale=\" + context.locale: '';\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t+ \"/products\" + \"?countryCode=\" + context.countryCode + \"&isRecurring=\" + context.isRecurring\n\t\t\t\t\t+ \"&amount=\" + context.totalAmount + \"&currencyCode=\" + context.currency\n\t\t\t\t\t+ \"&hide=fields\" + urlParameterLocale + \"&cacheBust=\" + cacheBust)\n\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar json = _extendLogoUrl(res.responseJSON, _c2SCommunicatorConfiguration.assetUrl, \"s\");\n\t\t\t\t\t\t\tif (_isPaymentProductInList(json.paymentProducts, _util.androidPayPaymentProductId)) {\n\t\t\t\t\t\t\t\tif (_AndroidPay.isMerchantIdProvided(paymentProductSpecificInputs)) {\n\t\t\t\t\t\t\t\t\t_AndroidPay.isAndroidPayAvailable(context, paymentProductSpecificInputs).then(function (isAndroidPayAvailable) {\n\t\t\t\t\t\t\t\t\t\t_util.filterOutProductsThatAreNotSupportedInThisBrowser(json);\n\t\t\t\t\t\t\t\t\t\tif (json.paymentProducts.length === 0) {\n\t\t\t\t\t\t\t\t\t\t\tpromise.reject('No payment products available');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\t\t\t\t\tpromise.resolve(json);\n\t\t\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\t\t\t_util.filterOutProductsThatAreNotSupportedInThisBrowser(json);\n\t\t\t\t\t\t\t\t\t\tif (json.paymentProducts.length === 0) {\n\t\t\t\t\t\t\t\t\t\t\tpromise.reject('No payment products available');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\t\t\t\t\tpromise.resolve(json);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t//AndroidPay does not have merchantId\n\t\t\t\t\t\t\t\t\t_util.filterOutProductsThatAreNotSupportedInThisBrowser(json);\n\t\t\t\t\t\t\t\t\tconsole.warn('You have not provided a merchantId for Android Pay, you can set this in the paymentProductSpecificInputs object');\n\t\t\t\t\t\t\t\t\tpromise.resolve(json);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_util.filterOutProductsThatAreNotSupportedInThisBrowser(json);\n\t\t\t\t\t\t\t\tif (json.paymentProducts.length === 0) {\n\t\t\t\t\t\t\t\t\tpromise.reject('No payment products available');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\t\t\tpromise.resolve(json);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject('failed to retrieve Basic Payment Products', res);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getBasicPaymentProductGroups = function (context) {\n\t\t\tvar cacheKeyLocale = context.locale ? context.locale + \"_\" : '';\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProductGroups-\" + context.totalAmount + \"_\" + context.countryCode + \"_\"\n\t\t\t\t\t+ cacheKeyLocale + context.isRecurring + \"_\" + context.currency;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tvar urlParameterLocale = context.locale ? \"&locale=\" + context.locale: '';\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t+ \"/productgroups\" + \"?countryCode=\" + context.countryCode + \"&isRecurring=\" + context.isRecurring\n\t\t\t\t\t+ \"&amount=\" + context.totalAmount + \"&currencyCode=\" + context.currency\n\t\t\t\t\t+ \"&hide=fields\" + urlParameterLocale + \"&cacheBust=\" + cacheBust)\n\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar json = _extendLogoUrl(res.responseJSON, _c2SCommunicatorConfiguration.assetUrl, \"Groups\");\n\t\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\t\tpromise.resolve(json);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProduct = function (paymentProductId, context, paymentProductSpecificInputs) {\n\t\t\tvar paymentProductSpecificInputs = paymentProductSpecificInputs || {};\n\t\t\tvar cacheKeyLocale = context.locale ? context.locale + \"_\" : '';\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProduct-\" + paymentProductId + \"_\" + context.totalAmount + \"_\"\n\t\t\t\t\t+ context.countryCode + \"_\" + cacheKeyLocale + context.isRecurring + \"_\"\n\t\t\t\t\t+ context.currency + \"_\" + JSON.stringify(paymentProductSpecificInputs);\n\t\t\tif (_util.paymentProductsThatAreNotSupportedInThisBrowser.indexOf(paymentProductId) > -1) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.reject({\n\t\t\t\t\t\t\"errorId\": \"48b78d2d-1b35-4f8b-92cb-57cc2638e901\",\n\t\t\t\t\t\t\"errors\": [{\n\t\t\t\t\t\t\t\"code\": \"1007\",\n\t\t\t\t\t\t\t\"propertyName\": \"productId\",\n\t\t\t\t\t\t\t\"message\": \"UNKNOWN_PRODUCT_ID\",\n\t\t\t\t\t\t\t\"httpStatusCode\": 404\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tif (_providedPaymentProduct && _providedPaymentProduct.id === paymentProductId) {\n\t\t\t\t\tif (_cache[cacheKey]) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar json = _cleanJSON(_providedPaymentProduct, _c2SCommunicatorConfiguration.assetUrl);\n\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t} else if (_cache[cacheKey]) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else {\n\t\t\t\t\tvar urlParameterlocale = context.locale ? \"&locale=\" + context.locale: '';\n\t\t\t\t\tvar getPaymentProductUrl = formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t\t+ \"/products/\" + paymentProductId + \"?countryCode=\" + context.countryCode\n\t\t\t\t\t\t+ \"&isRecurring=\" + context.isRecurring + \"&amount=\" + context.totalAmount\n\t\t\t\t\t\t+ \"&currencyCode=\" + context.currency + urlParameterlocale;\n\n\t\t\t\t\tif ((paymentProductId === _util.bancontactPaymentProductId) &&\n\t\t\t\t\tpaymentProductSpecificInputs &&\n\t\t\t\t\tpaymentProductSpecificInputs.bancontact &&\n\t\t\t\t\tpaymentProductSpecificInputs.bancontact.forceBasicFlow) {\n\t\t\t\t\t\t// Add query parameter to products call to force basic flow for bancontact\n\t\t\t\t\t\tgetPaymentProductUrl += \"&forceBasicFlow=\" + paymentProductSpecificInputs.bancontact.forceBasicFlow\n\t\t\t\t\t}\n\n\t\t\t\t\tgetPaymentProductUrl += \"&cacheBust=\" + cacheBust;\n\n\t\t\t\t\tNet.get(getPaymentProductUrl)\n\t\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t\tvar cleanedJSON = _cleanJSON(res.responseJSON, c2SCommunicatorConfiguration.assetUrl);\n\t\t\t\t\t\t\t\tif (paymentProductId === _util.androidPayPaymentProductId) {\n\t\t\t\t\t\t\t\t\tif (_AndroidPay.isMerchantIdProvided(paymentProductSpecificInputs)) {\n\t\t\t\t\t\t\t\t\t\t_AndroidPay.isAndroidPayAvailable(context, paymentProductSpecificInputs).then(function (isAndroidPayAvailable) {\n\t\t\t\t\t\t\t\t\t\t\tif (isAndroidPayAvailable) {\n\t\t\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\t\t\t\t\t\tpromise.resolve(cleanedJSON);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\t\t\t\t\t\t//_isAndroidPayAvailable returned false so android pay is not available, so reject getPaymentProduct\n\t\t\t\t\t\t\t\t\t\t\t\tpromise.reject(cleanedJSON);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\t\t\t\t\t//_isAndroidPayAvailable rejected so not available\n\t\t\t\t\t\t\t\t\t\t\tpromise.reject(cleanedJSON);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\t\t\t\t// merchantId is not provided so reject\n\t\t\t\t\t\t\t\t\t\tpromise.reject(cleanedJSON);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\t\t\tpromise.resolve(cleanedJSON);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpromise.reject('failed to retrieve Payment Product', res);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductGroup = function (paymentProductGroupId, context) {\n\t\t\tvar cacheKeyLocale = context.locale ? context.locale + \"_\" : '';\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProductGroup-\" + paymentProductGroupId + \"_\" + context.totalAmount + \"_\"\n\t\t\t\t\t+ context.countryCode + \"_\" + cacheKeyLocale + context.isRecurring + \"_\"\n\t\t\t\t\t+ context.currency;\n\t\t\tif (_providedPaymentProduct && _providedPaymentProduct.id === paymentProductGroupId) {\n\t\t\t\tif (_cache[cacheKey]) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else {\n\t\t\t\t\tvar json = _cleanJSON(_providedPaymentProduct, _c2SCommunicatorConfiguration.assetUrl);\n\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t} else if (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tvar urlParameterlocale = context.locale ? \"&locale=\" + context.locale: '';\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t+ \"/productgroups/\" + paymentProductGroupId + \"?countryCode=\" + context.countryCode\n\t\t\t\t\t+ \"&isRecurring=\" + context.isRecurring + \"&amount=\" + context.totalAmount\n\t\t\t\t\t+ \"&currencyCode=\" + context.currency + urlParameterlocale + \"&cacheBust=\" + cacheBust)\n\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar cleanedJSON = _cleanJSON(res.responseJSON, c2SCommunicatorConfiguration.assetUrl);\n\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\tpromise.resolve(cleanedJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductIdByCreditCardNumber = function (partialCreditCardNumber, context) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, iinDetailsResponse = new IinDetailsResponse()\n\t\t\t\t, cacheKey = \"getPaymentProductIdByCreditCardNumber-\" + partialCreditCardNumber;\n\n\t\t\tvar that = this;\n\t\t\tthis.context = context;\n\t\t\tif (_cache[cacheKey]) {// cache is based on digit 1-6\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tvar isEnoughDigits = function (partialCreditCardNumber) {\n\t\t\t\t\tif (partialCreditCardNumber.length < 6) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\t\tif (isEnoughDigits(partialCreditCardNumber)) {\n\t\t\t\t\tNet.post(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId + \"/services/getIINdetails\")\n\t\t\t\t\t\t.data(JSON.stringify(this.convertContextToIinDetailsContext(partialCreditCardNumber, this.context)))\n\t\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t\tiinDetailsResponse.json = res.responseJSON;\n\t\t\t\t\t\t\t\tiinDetailsResponse.countryCode = res.responseJSON.countryCode;\n\t\t\t\t\t\t\t\tiinDetailsResponse.paymentProductId = res.responseJSON.paymentProductId;\n\t\t\t\t\t\t\t\tiinDetailsResponse.isAllowedInContext = res.responseJSON.isAllowedInContext;\n\t\t\t\t\t\t\t\tiinDetailsResponse.coBrands = res.responseJSON.coBrands;\n\t\t\t\t\t\t\t\t// check if this card is supported\n\t\t\t\t\t\t\t\t// if isAllowedInContext is available in the response set status and resolve\n\t\t\t\t\t\t\t\tif (res.responseJSON.hasOwnProperty('isAllowedInContext')) {\n\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"SUPPORTED\";\n\t\t\t\t\t\t\t\t\tif (iinDetailsResponse.isAllowedInContext === false) {\n\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"EXISTING_BUT_NOT_ALLOWED\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t_cache[cacheKey] = iinDetailsResponse;\n\t\t\t\t\t\t\t\t\tpromise.resolve(iinDetailsResponse);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t//if isAllowedInContext is not available get the payment product again to determine status and resolve\n\t\t\t\t\t\t\t\t\tthat.getPaymentProduct(iinDetailsResponse.paymentProductId, that.context).then(function (paymentProduct) {\n\t\t\t\t\t\t\t\t\t\tif (paymentProduct) {\n\t\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"SUPPORTED\";\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"UNSUPPORTED\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = iinDetailsResponse;\n\t\t\t\t\t\t\t\t\t\tpromise.resolve(iinDetailsResponse);\n\t\t\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"UNKNOWN\";\n\t\t\t\t\t\t\t\t\t\tpromise.reject(iinDetailsResponse);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"UNKNOWN\";\n\t\t\t\t\t\t\t\tpromise.reject(iinDetailsResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tiinDetailsResponse.status = \"NOT_ENOUGH_DIGITS\";\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(iinDetailsResponse);\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.convertContextToIinDetailsContext = function (partialCreditCardNumber, context) {\n\t\t\treturn {\n\t\t\t\t\"bin\": partialCreditCardNumber,\n\t\t\t\t\"paymentContext\": {\n\t\t\t\t\t\"countryCode\": context.countryCode,\n\t\t\t\t\t\"isRecurring\": context.isRecurring,\n\t\t\t\t\t\"amountOfMoney\": {\n\t\t\t\t\t\t\"amount\": context.totalAmount,\n\t\t\t\t\t\t\"currencyCode\": context.currency\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.getPublicKey = function () {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"publicKey\";\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId + \"/crypto/publickey\")\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar publicKeyResponse = new PublicKeyResponse(res.responseJSON);\n\t\t\t\t\t\t\t_cache[cacheKey] = publicKeyResponse;\n\t\t\t\t\t\t\tpromise.resolve(publicKeyResponse);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(\"unable to get public key\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductPublicKey = function (paymentProductId) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"paymentProductPublicKey\";\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId + \"/products/\" + paymentProductId + \"/publicKey\")\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar paymentProductPublicKeyResponse = new PaymentProductPublicKeyResponse(res.responseJSON);\n\t\t\t\t\t\t\t_cache[cacheKey] = paymentProductPublicKeyResponse;\n\t\t\t\t\t\t\tpromise.resolve(paymentProductPublicKeyResponse);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(\"unable to get payment product public key\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t}\n\n\t\tthis.getPaymentProductNetworks = function (paymentProductId, context) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"paymentProductNetworks-\" + paymentProductId + \"_\" + context.countryCode + \"_\" + context.currency + \"_\"\n\t\t\t\t\t+ context.totalAmount + \"_\" + context.isRecurring;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t+ \"/products/\" + paymentProductId + \"/networks\" + \"?countryCode=\" + context.countryCode + \"&currencyCode=\" + context.currency\n\t\t\t\t\t+ \"&amount=\" + context.totalAmount + \"&isRecurring=\" + context.isRecurring)\n\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t_cache[cacheKey] = res.responseJSON;\n\t\t\t\t\t\t\tpromise.resolve(res.responseJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductDirectory = function (paymentProductId, currencyCode, countryCode) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"getPaymentProductDirectory-\" + paymentProductId + \"_\" + currencyCode + \"_\" + countryCode;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId + \"/products/\" + paymentProductId + \"/directory?countryCode=\" + countryCode + \"&currencyCode=\" + currencyCode)\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t_cache[cacheKey] = res.responseJSON;\n\t\t\t\t\t\t\tpromise.resolve(res.responseJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(\"unable to retrieve payment product directory\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.convertAmount = function (amount, source, target) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"convertAmount-\" + amount + \"_\" + source + \"_\" + target;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId + \"/services/convert/amount?source=\" + source + \"&target=\" + target + \"&amount=\" + amount)\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t_cache[cacheKey] = res.responseJSON;\n\t\t\t\t\t\t\tpromise.resolve(res.responseJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(\"unable to convert amount\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getThirdPartyPaymentStatus = function (paymentId) {\n\t\t\tvar promise = new Promise();\n\n\t\t\tNet.get(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId + \"/payments/\" + paymentId + \"/thirdpartystatus\")\n\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t.end(function (res) {\n\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\tpromise.resolve(res.responseJSON);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpromise.reject(\"unable to retrieve third party status\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getCustomerDetails = function(paymentProductId, context) {\n\n\t\t\tvar promise = new Promise();\n\t\t\tvar cacheKey = \"getCustomerDetails_\" + context.countryCode;\n\t\t\tcacheKey = constructCacheKeyFromKeyValues(cacheKey, context.values);\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.post(formatUrl(_c2SCommunicatorConfiguration.clientApiUrl) + _c2SCommunicatorConfiguration.customerId + \"/products/\" + paymentProductId + \"/customerDetails\")\n\t\t\t\t\t.data(JSON.stringify(context))\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t_cache[cacheKey] = res.responseJSON;\n\t\t\t\t\t\t\tpromise.resolve(res.responseJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(res.responseJSON);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tvar constructCacheKeyFromKeyValues = function(prefix, values) {\n\t\t\tvar cacheKey = prefix;\n\t\t\tfor (var key in values){\n\t\t\t\tif (values.hasOwnProperty(key)) {\n\t\t\t\t\tcacheKey += \"_\" + values[key].key + \"_\" + values[key].value;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cacheKey;\n\t\t}\n\t};\n\n\tconnectsdk.C2SCommunicator = C2SCommunicator;\n\treturn C2SCommunicator;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_10__ = ((function(connectsdk) {\n\n\tvar LabelTemplateElement = function (json) {\n\t\tthis.json = json;\n\t\tthis.attributeKey = json.attributeKey;\n\t\tthis.mask = json.mask;\n\t\tthis.wildcardMask = json.mask ? json.mask.replace(/9/g, \"*\") : \"\";\n\t};\n\n\tconnectsdk.LabelTemplateElement = LabelTemplateElement;\n\treturn LabelTemplateElement;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_11__ = ((function(connectsdk) {\n\n\tvar Attribute = function (json) {\n\t\tthis.json = json;\n\t\tthis.key = json.key;\n\t\tthis.value = json.value;\n\t\tthis.status = json.status;\n\t\tthis.mustWriteReason = json.mustWriteReason;\n\t};\n\n\tconnectsdk.Attribute = Attribute;\n\treturn Attribute;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_10__], __WEBPACK_LOCAL_MODULE_12__ = ((function(connectsdk, LabelTemplateElement) {\n\n\tvar _parseJSON = function (_json, _labelTemplate, _labelTemplateElementByAttributeKey) {\n\t\tif (_json.labelTemplate) {\n\t\t\tfor (var i = 0, l = _json.labelTemplate.length; i < l; i++) {\n\t\t\t\tvar labelTemplateElement = new LabelTemplateElement(_json.labelTemplate[i]);\n\t\t\t\t_labelTemplate.push(labelTemplateElement);\n\t\t\t\t_labelTemplateElementByAttributeKey[labelTemplateElement.attributeKey] = labelTemplateElement;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar AccountOnFileDisplayHints = function (json) {\n\t\tthis.json = json;\n\t\tthis.labelTemplate = [];\n\t\tthis.labelTemplateElementByAttributeKey = {};\n\n\t\t_parseJSON(json, this.labelTemplate, this.labelTemplateElementByAttributeKey);\n\t};\n\n\tconnectsdk.AccountOnFileDisplayHints = AccountOnFileDisplayHints;\n\treturn AccountOnFileDisplayHints;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__ ,__WEBPACK_LOCAL_MODULE_12__, __WEBPACK_LOCAL_MODULE_11__], __WEBPACK_LOCAL_MODULE_13__ = ((function(connectsdk, AccountOnFileDisplayHints, Attribute) {\n\n\tvar _parseJSON = function (_json, _attributes, _attributeByKey) {\n\t\tif (_json.attributes) {\n\t\t\tfor (var i = 0, l = _json.attributes.length; i < l; i++) {\n\t\t\t\tvar attribute = new Attribute(_json.attributes[i]);\n\t\t\t\t_attributes.push(attribute);\n\t\t\t\t_attributeByKey[attribute.key] = attribute;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar AccountOnFile = function (json) {\n\t\tvar that = this;\n\t\tthis.json = json;\n\t\tthis.attributes = [];\n\t\tthis.attributeByKey = {};\n\t\tthis.displayHints = new AccountOnFileDisplayHints(json.displayHints);\n\t\tthis.id = json.id;\n\t\tthis.paymentProductId = json.paymentProductId;\n\n\t\tthis.getMaskedValueByAttributeKey = function(attributeKey) {\n\t\t\tvar value = this.attributeByKey[attributeKey].value;\n\t\t\tvar wildcardMask;\n\t\t\ttry {\n\t\t\t\twildcardMask = this.displayHints.labelTemplateElementByAttributeKey[attributeKey].wildcardMask;\n\t\t\t} catch (e) {}\n\t\t\tif (value !== undefined && wildcardMask !== undefined) {\n\t\t\t\tvar maskingUtil = new connectsdk.MaskingUtil();\n\t\t\t\treturn maskingUtil.applyMask(wildcardMask, value);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t};\n\n\t\t_parseJSON(json, this.attributes, this.attributeByKey);\n\t};\n\n\tconnectsdk.AccountOnFile = AccountOnFile;\n\treturn AccountOnFile;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_14__ = ((function(connectsdk) {\n\n\tvar PaymentProductDisplayHints = function (json) {\n\t\tthis.json = json;\n\t\tthis.displayOrder = json.displayOrder;\n\t\tthis.label = json.label;\n\t\tthis.logo = json.logo;\n\t};\n\n\tconnectsdk.PaymentProductDisplayHints = PaymentProductDisplayHints;\n\treturn PaymentProductDisplayHints;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_13__, __WEBPACK_LOCAL_MODULE_14__], __WEBPACK_LOCAL_MODULE_15__ = ((function(connectsdk, AccountOnFile, PaymentProductDisplayHints) {\n\n\tvar _parseJSON = function (_json, _accountsOnFile, _accountOnFileById) {\n\t\tif (_json.accountsOnFile) {\n\t\t\tfor (var i = 0, il = _json.accountsOnFile.length; i < il; i++) {\n\t\t\t\tvar accountOnFile = new AccountOnFile(_json.accountsOnFile[i]);\n\t\t\t\t_accountsOnFile.push(accountOnFile);\n\t\t\t\t_accountOnFileById[accountOnFile.id] = accountOnFile;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProduct = function (json) {\n\t\tthis.json = json;\n\t\tthis.json.type = \"product\";\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\tthis.allowsRecurring = json.allowsRecurring;\n\t\tthis.allowsTokenization = json.allowsTokenization;\n\t\tthis.autoTokenized  = json.autoTokenized ;\n\t\tthis.displayHints = new PaymentProductDisplayHints(json.displayHints);\n\t\tthis.id = json.id;\n\t\tthis.maxAmount = json.maxAmount;\n\t\tthis.minAmount = json.minAmount;\n\t\tthis.paymentMethod = json.paymentMethod;\n\t\tthis.mobileIntegrationLevel = json.mobileIntegrationLevel;\n\t\tthis.usesRedirectionTo3rdParty = json.usesRedirectionTo3rdParty;\n\t\tthis.paymentProductGroup = json.paymentProductGroup;\n\n\t\t_parseJSON(json, this.accountsOnFile, this.accountOnFileById);\n\t};\n\n\tconnectsdk.BasicPaymentProduct = BasicPaymentProduct;\n\treturn BasicPaymentProduct;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_13__, __WEBPACK_LOCAL_MODULE_14__], __WEBPACK_LOCAL_MODULE_16__ = ((function(connectsdk, AccountOnFile, PaymentProductDisplayHints) {\n\n\tvar _parseJSON = function (_json, _accountsOnFile, _accountOnFileById) {\n\t\tif (_json.accountsOnFile) {\n\t\t\tfor (var i = 0, il = _json.accountsOnFile.length; i < il; i++) {\n\t\t\t\tvar accountOnFile = new AccountOnFile(_json.accountsOnFile[i]);\n\t\t\t\t_accountsOnFile.push(accountOnFile);\n\t\t\t\t_accountOnFileById[accountOnFile.id] = accountOnFile;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProductGroup = function (json) {\n\t\tthis.json = json;\n\t\tthis.json.type = \"group\";\n\t\tthis.id = json.id;\n\t\tthis.displayHints = new PaymentProductDisplayHints(json.displayHints);\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\t_parseJSON(json, this.accountsOnFile, this.accountOnFileById);\n\t};\n\n\tconnectsdk.BasicPaymentProductGroup = BasicPaymentProductGroup;\n\treturn BasicPaymentProductGroup;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_17__ = ((function(connectsdk) {\n\n\tvar MaskedString = function(formattedValue, cursorIndex) {\n\n\t\tthis.formattedValue = formattedValue;\n\t\tthis.cursorIndex = cursorIndex;\n\t};\n\n\tconnectsdk.MaskedString = MaskedString;\n\treturn MaskedString;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_17__], __WEBPACK_LOCAL_MODULE_18__ = ((function(connectsdk, MaskedString) {\n\n\tvar _fillBuffer = function(index, offset, buffer, tempMask, valuec) {\n\t\tif (index+offset < valuec.length && index < tempMask.length) {\n\t\t\tif ((tempMask[index] === \"9\" && Number(valuec[index+offset]) > -1 && valuec[index+offset] !== \" \") || tempMask[index] === \"*\") {\n\t\t\t\tbuffer.push(valuec[index+offset]);\n\t\t\t} else {\n\t\t\t\tif (valuec[index+offset] === tempMask[index]) {\n\t\t\t\t\tbuffer.push(valuec[index+offset]);\n\t\t\t\t} else if (tempMask[index] !== \"9\" && tempMask[index] !== \"*\") {\n\t\t\t\t\tbuffer.push(tempMask[index]);\n\t\t\t\t\toffset--;\n\t\t\t\t} else {\n\t\t\t\t\t// offset++;\n\t\t\t\t\tvaluec.splice(index+offset, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t_fillBuffer(index+1, offset, buffer, tempMask, valuec);\n\t\t}\n\t};\n\n\tvar MaskingUtil = function () {\n\t\tthis.applyMask = function (mask, newValue, oldValue) {\n\t\t\tvar buffer = [],\n\t\t\t\t\tvaluec = newValue.split(\"\");\n\t\t\tif (mask) {\n\t\t\t\tvar maskc = mask.split(\"\"),\n\t\t\t\t\t\ttempMask = [];\n\t\t\t\tfor (var i = 0, il = maskc.length; i < il; i++) {\n\t\t\t\t\t// the char '{' and '}' should ALWAYS be ignored\n\t\t\t\t\tvar c = maskc[i];\n\t\t\t\t\tif (c === \"{\" || c === \"}\") {\n\t\t\t\t\t\t// ignore\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttempMask.push(c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// tempmask now contains the replaceable chars and the non-replaceable masks at the correct index\n\t\t\t\t_fillBuffer(0, 0, buffer, tempMask, valuec);\n\t\t\t} else {\n\t\t\t\t// send back as is\n\t\t\t\tfor (var i = 0, il = valuec.length; i < il; i++) {\n\t\t\t\t\tvar c = valuec[i];\n\t\t\t\t\tbuffer.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\tnewValue = buffer.join(\"\");\n\t\t\tvar cursor = 1;\n\t\t\t// calculate the cursor index\n\t\t\tif (oldValue) {\n\t\t\t\tvar tester = oldValue.split(\"\");\n\t\t\t\tfor (var i = 0, il = buffer.length; i < il; i++) {\n\t\t\t\t\tif (buffer[i] !== tester[i]) {\n\t\t\t\t\t\tcursor = i+1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (newValue.substring(0, newValue.length -1) === oldValue) {\n\t\t\t\tcursor = newValue.length + 1;\n\t\t\t}\n\t\t\treturn new MaskedString(newValue, cursor);\n\t\t};\n\t\t\n\t\tthis.getMaxLengthBasedOnMask = function (mask) {\n\t\t\tif (mask) {\n\t\t\t\tvar maskc = mask.split(\"\"),\n\t\t\t\t\t\tnewLength = -1;\n\t\t\t\tfor (var i = 0, il = maskc.length; i < il; i++) {\n\t\t\t\t\tnewLength++;\n\t\t\t\t\tvar c = maskc[i];\n\t\t\t\t\tif (c === \"{\" || c === \"}\") {\n\t\t\t\t\t\tnewLength--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn newLength;\n\t\t\t}\n\t\t};\n\n\t\tthis.removeMask = function (mask, value) {\n\t\t\t// remove the mask from the masked input\n\t\t\tvar buffer = [],\n\t\t\t\t\tvaluec = (value) ? value.split(\"\") : [];\n\t\t\tif (mask) {\n\t\t\t\tvar maskc = mask.split(\"\"),\n\t\t\t\t\t\tvalueIndex = -1,\n\t\t\t\t\t\tinMask = false;\n\t\t\t\tfor (var i = 0, il = maskc.length; i < il; i++) {\n\t\t\t\t\tvalueIndex++;\n\t\t\t\t\t// the char '{' and '}' should ALWAYS be ignored\n\t\t\t\t\tvar c = maskc[i];\n\t\t\t\t\tif (c === \"{\" || c === \"}\") {\n\t\t\t\t\t\tvalueIndex--;\n\t\t\t\t\t\tif (c === \"{\") {\n\t\t\t\t\t\t\tinMask = true;\n\t\t\t\t\t\t} else if (c === \"}\") {\n\t\t\t\t\t\t\tinMask = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (inMask && valuec[valueIndex]) {\n\t\t\t\t\t\t\tbuffer.push(valuec[valueIndex]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// send back as is\n\t\t\t\tfor (var i = 0, il = valuec.length; i < il; i++) {\n\t\t\t\t\tvar c = valuec[i];\n\t\t\t\t\tbuffer.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn buffer.join(\"\").trim();\n\t\t};\n\t};\n\n\tconnectsdk.MaskingUtil = MaskingUtil;\n\treturn MaskingUtil;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_19__ = ((function(connectsdk) {\n\n\tvar ValidationRuleLuhn = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n\t\tthis.validate = function (value) {\n\t\t\tvar luhnArr = [[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]]\n\t\t\t\t,sum = 0;\n\t\t\t\t\n\t   \t\tvalue.replace(/\\D+/g,\"\").replace(/[\\d]/g, function(c, p, o) {\n\t\t        sum += luhnArr[ (o.length-p)&1 ][ parseInt(c,10) ];\n\t\t    });\n\t\t    return (sum%10 === 0) && (sum > 0);\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleLuhn = ValidationRuleLuhn;\n\treturn ValidationRuleLuhn;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_20__ = ((function (connectsdk) {\n\n\tvar _validateDateFormat = function (value) {\n\t\tvar pattern = /\\d{4}|\\d{6}$/g;\n\t\treturn pattern.test(value);\n\t};\n\n\tvar ValidationRuleExpirationDate = function (json) {\n\t\tthis.json = json;\n\t\tthis.type = json.type,\n\t\t\tthis.errorMessageId = json.type;\n\n\t\t// value is mmYY or mmYYYY\n\t\tthis.validate = function (value) {\n\t\t\tvalue = value.replace(/[^\\d]/g, '');\n\t\t\tif (value.length === 4) {\n\t\t\t\tsplit = [value.substring(0, 2), \"20\" + value.substring(2, 4)];\n\t\t\t} else if (value.length === 6) {\n\t\t\t\tsplit = [value.substring(0, 2), value.substring(2, 6)];\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_validateDateFormat(value)) {\n\t\t\t\tvar now = new Date(new Date().getFullYear(), new Date().getMonth(), 1);\n\t\t\t\tvar expirationDate = new Date(split[1], split[0] - 1, 1);\n\t\t\t\tif (expirationDate.getMonth() !== Number(split[0] - 1) || expirationDate.getFullYear() !== Number(split[1])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn expirationDate >= now; // the expiration month could be THIS month but that is still valid!\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleExpirationDate = ValidationRuleExpirationDate;\n\treturn ValidationRuleExpirationDate;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_21__ = ((function(connectsdk) {\n\n\tvar ValidationRuleFixedList = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n\t\tthis.allowedValues = json.attributes.allowedValues;\n\t\t\n\t\tthis.validate = function (value) {\n\t\t\tfor (var i = 0, il = this.allowedValues.length; i < il; i++) {\n\t\t\t\tif (this.allowedValues[i] === value) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleFixedList = ValidationRuleFixedList;\n\treturn ValidationRuleFixedList;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_22__ = ((function(connectsdk) {\n\n\tvar ValidationRuleLength = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n        this.maxLength = json.attributes.maxLength;\n\t\tthis.minLength = json.attributes.minLength;\n\t\t\n\t\tthis.validate = function (value) {\n\t\t\treturn this.minLength <= value.length && value.length <= this.maxLength;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleLength = ValidationRuleLength;\n\treturn ValidationRuleLength;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_23__ = ((function(connectsdk) {\n\n\tvar ValidationRuleRange = function(json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n        this.maxValue = json.attributes.maxValue;\n\t\tthis.minValue = json.attributes.minValue;\n\t\t\n\t\tthis.validate = function(value) {\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvalue = Number(value);\n\t\t\treturn this.minValue <= value && value <= this.maxValue;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleRange = ValidationRuleRange;\n\treturn ValidationRuleRange;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_24__ = ((function(connectsdk) {\n\n\tvar ValidationRuleRegularExpression = function(json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n\t\tthis.regularExpression = json.attributes.regularExpression;\n\t\t\n\t\tthis.validate = function(value) {\n\t\t\tvar regexp = new RegExp(this.regularExpression);\n\t\t\treturn regexp.test(value);\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleRegularExpression = ValidationRuleRegularExpression;\n\treturn ValidationRuleRegularExpression;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_25__ = ((function(connectsdk) {\n\n\tvar ValidationRuleEmailAddress = function(json) {\n\t\tthis.json = json;\n\t\tthis.type = json.type,\n\t\tthis.errorMessageId = json.type;\n\n\t\tthis.validate = function(value) {\n\t\t\tvar regexp = new RegExp(/^[^@\\.]+(\\.[^@\\.]+)*@([^@\\.]+\\.)*[^@\\.]+\\.[^@\\.][^@\\.]+$/i);\n\t\t\treturn regexp.test(value);\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleEmailAddress = ValidationRuleEmailAddress;\n\treturn ValidationRuleEmailAddress;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_26__ = ((function(connectsdk) {\n\n\tvar ValidationRuleTermsAndConditions = function(json) {\n\t\tthis.json = json;\n\t\tthis.type = json.type,\n\t\tthis.errorMessageId = json.type;\n\n\t\tthis.validate = function(value) {\n\t\t\treturn true === value || \"true\" === value;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleTermsAndConditions = ValidationRuleTermsAndConditions;\n\treturn ValidationRuleTermsAndConditions;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_27__ = ((function(connectsdk) {\n\n\tvar ValidationRuleBoletoBancarioRequiredness = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n        this.fiscalNumberLength = json.attributes.fiscalNumberLength;\n\t\t\n\t\tthis.validate = function (value, fiscalNumberValue) {\n\t\t\treturn (fiscalNumberValue.length === this.fiscalNumberLength && value.length > 0) || fiscalNumberValue.length !== this.fiscalNumberLength;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleBoletoBancarioRequiredness = ValidationRuleBoletoBancarioRequiredness;\n\treturn ValidationRuleBoletoBancarioRequiredness;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_28__ = ((function (connectsdk) {\n\n  /**\n   * Sanitize value by remove all unwanted chars of a Iban format\n   *\n   * @param {String} value\n   * @returns {string}\n   * @private\n   */\n  var _sanitizeValue = function (value) {\n    return value.replace(/[^\\d\\w]+/g, '').toUpperCase();\n  };\n\n  /**\n   * Get state if given value is a valid Iban format\n   *\n   * @param {String} value\n   * @returns {boolean}\n   * @private\n   */\n  var _isValidFormat = function (value) {\n    return typeof value === 'string' && /^[A-Z]{2}[0-9]{2}[A-Z0-9]{4}[0-9]{7}([A-Z0-9]?){0,16}$/.test(_sanitizeValue(value));\n  };\n\n  /**\n   * Convert a value to a string needed for validation calculations\n   *\n   * @param {String} value\n   * @returns {string}\n   * @private\n   */\n  var _toComputedString = function (value) {\n    return _sanitizeValue(value)\n\n    // place the first 4 chars to the end\n      .replace(/(^.{4})(.*)/, '$2$1')\n\n      // replace letters by corresponding numbers A=10 / Z=35\n      .replace(/[A-Z]/g, function (d) {\n        return d.charCodeAt(0) - 55;\n      });\n  }\n\n  /**\n   * Validate Iban by given json\n   *\n   * @param {Object} json\n   * @constructor\n   */\n  var ValidationRuleIban = function (json) {\n    this.json           = json;\n    this.type           = json.type;\n    this.errorMessageId = json.type;\n\n    /**\n     * Validate Iban nrule\n     *\n     * @see https://github.com/arhs/iban.js/blob/master/iban.js\n     *\n     * @param   {string} value\n     * @returns {boolean}\n     */\n    this.validate = function (value) {\n\n      // bail if format is invalid\n      if (!_isValidFormat(value)) {\n        return false;\n      }\n\n      // Check if reminder module 97 equals 1\n      // only then it should pass the validation\n      var remainder = _toComputedString(value),\n          block;\n\n      while (remainder.length > 2) {\n        block     = remainder.slice(0, 9);\n        remainder = parseInt(block, 10) % 97 + remainder.slice(block.length);\n      }\n\n      return (parseInt(remainder, 10) % 97) === 1;\n    };\n  };\n\n  connectsdk.ValidationRuleIban = ValidationRuleIban;\n  return ValidationRuleIban;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_25__, __WEBPACK_LOCAL_MODULE_26__, __WEBPACK_LOCAL_MODULE_20__, __WEBPACK_LOCAL_MODULE_21__, __WEBPACK_LOCAL_MODULE_22__, __WEBPACK_LOCAL_MODULE_19__, __WEBPACK_LOCAL_MODULE_23__, __WEBPACK_LOCAL_MODULE_24__, __WEBPACK_LOCAL_MODULE_27__, __WEBPACK_LOCAL_MODULE_28__], __WEBPACK_LOCAL_MODULE_29__ = ((function (connectsdk, ValidationRuleEmailAddress, ValidationRuleTermsAndConditions, ValidationRuleExpirationDate, ValidationRuleFixedList, ValidationRuleLength, ValidationRuleLuhn, ValidationRuleRange, ValidationRuleRegularExpression, ValidationRuleBoletoBancarioRequiredness, ValidationRuleIban) {\n\n    var ValidationRuleFactory = function () {\n\n        this.makeValidator = function (json) {\n            // create new class based on the rule\n            try {\n                var classType = json.type.charAt(0).toUpperCase() + json.type.slice(1), // camel casing\n                    className = eval(\"ValidationRule\" + classType);\n                return new className(json);\n            } catch (e) {\n                console.warn('no validator for ', classType);\n            }\n            return null;\n        };\n    };\n\n    connectsdk.ValidationRuleFactory = ValidationRuleFactory;\n    return ValidationRuleFactory;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_20__, __WEBPACK_LOCAL_MODULE_21__, __WEBPACK_LOCAL_MODULE_22__, __WEBPACK_LOCAL_MODULE_19__, __WEBPACK_LOCAL_MODULE_23__, __WEBPACK_LOCAL_MODULE_24__, __WEBPACK_LOCAL_MODULE_25__, __WEBPACK_LOCAL_MODULE_26__, __WEBPACK_LOCAL_MODULE_28__, __WEBPACK_LOCAL_MODULE_29__], __WEBPACK_LOCAL_MODULE_30__ = ((function(connectsdk, ValidationRuleExpirationDate, ValidationRuleFixedList, ValidationRuleLength, ValidationRuleLuhn, ValidationRuleRange, ValidationRuleRegularExpression, ValidationRuleEmailAddress, ValidationRuleTermsAndConditions, ValidationRuleIban, ValidationRuleFactory) {\n\n\tvar DataRestrictions = function (json, mask) {\n\n\t\tvar _parseJSON = function (_json, _validationRules, _validationRuleByType) {\n\t\t    var validationRuleFactory = new ValidationRuleFactory();\n\t\t\tif (_json.validators) {\n\t\t\t\tfor (var key in _json.validators) {\n\t\t\t\t\tvar validationRule = validationRuleFactory.makeValidator({type: key, attributes: _json.validators[key]});\n\t\t\t\t\tif (validationRule) {\n\t\t\t\t\t\t_validationRules.push(validationRule);\n\t\t\t\t\t\t_validationRuleByType[validationRule.type] = validationRule;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.json = json;\n\t\tthis.isRequired = json.isRequired;\n\t\tthis.validationRules = [];\n\t\tthis.validationRuleByType = {};\n\n\t\t_parseJSON(json, this.validationRules, this.validationRuleByType);\n\t};\n\n\tconnectsdk.DataRestrictions = DataRestrictions;\n\treturn DataRestrictions;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_31__ = ((function(connectsdk) {\n\n\tvar ValueMappingElement = function (json) {\n\t\tthis.json = json;\n\t\tthis.displayName = json.displayName;\n\t\tthis.value = json.value;\n\t};\n\n\tconnectsdk.ValueMappingElement = ValueMappingElement;\n\treturn ValueMappingElement;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_31__], __WEBPACK_LOCAL_MODULE_32__ = ((function(connectsdk, ValueMappingElement) {\n\n\tvar FormElement = function (json) {\n\n\t\tvar _parseJSON = function (_json, _valueMapping) {\n\t\t\tif (_json.valueMapping) {\n\t\t\t\tfor (var i = 0, l = _json.valueMapping.length; i < l; i++) {\n\t\t\t\t\t_valueMapping.push(new ValueMappingElement(_json.valueMapping[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.json = json;\n\t\tthis.type = json.type;\n\t\tthis.valueMapping = [];\n\t\t\n\t\t_parseJSON(json, this.valueMapping);\n\t};\n\n\tconnectsdk.FormElement = FormElement;\n\treturn FormElement;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_33__ = ((function(connectsdk) {\n\n\tvar Tooltip = function (json) {\n\t\tthis.json = json;\n\t\tthis.image = json.image;\n\t\tthis.label = json.label;\n\t};\n\n\tconnectsdk.Tooltip = Tooltip;\n\treturn Tooltip;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_33__, __WEBPACK_LOCAL_MODULE_32__], __WEBPACK_LOCAL_MODULE_34__ = ((function(connectsdk, Tooltip, FormElement) {\n\n\tvar PaymentProductFieldDisplayHints = function (json) {\n\t\tthis.json = json;\n \t\tthis.displayOrder = json.displayOrder;\n\t\tif (json.formElement) {\n\t\t\tthis.formElement = new FormElement(json.formElement);\n\t\t}\n\t\tthis.label = json.label;\n\t\tthis.mask = json.mask;\n\t\tthis.obfuscate = json.obfuscate;\n\t\tthis.placeholderLabel = json.placeholderLabel;\n\t\tthis.preferredInputType = json.preferredInputType;\n\t\tthis.tooltip = json.tooltip? new Tooltip(json.tooltip): undefined;\n\t\tthis.alwaysShow = json.alwaysShow;\n\t\tthis.wildcardMask = json.mask ? json.mask.replace(/9/g, \"*\") : \"\";\n\t};\n\n\tconnectsdk.PaymentProductFieldDisplayHints = PaymentProductFieldDisplayHints;\n\treturn PaymentProductFieldDisplayHints;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_34__, __WEBPACK_LOCAL_MODULE_30__, __WEBPACK_LOCAL_MODULE_18__], __WEBPACK_LOCAL_MODULE_35__ = ((function(connectsdk, PaymentProductFieldDisplayHints, DataRestrictions, MaskingUtil) {\n\tvar PaymentProductField = function (json) {\n\t\tthis.json = json;\n\t\tthis.displayHints = new PaymentProductFieldDisplayHints(json.displayHints);\n\t\tthis.dataRestrictions = new DataRestrictions(json.dataRestrictions, this.displayHints.mask);\n\t\tthis.id = json.id;\n\t\tthis.type = json.type;\n\t\tvar _errorCodes = [];\n\n\t\tthis.getErrorCodes = function (value) {\n\t\t\tif (value) {\n\t\t\t\t_errorCodes = [];\n\t\t\t\tthis.isValid(value);\n\t\t\t}\n\t\t\treturn _errorCodes;\n\t\t};\n\t\tthis.isValid = function (value) {\n\t\t\t// isValid checks all datarestrictions\n\t\t\tvar validators = this.dataRestrictions.validationRules;\n\t\t\tvar hasError = false;\n\t\t\tvalue = this.removeMask(value);\n\t\t\tfor (var i = 0, il = validators.length; i < il; i++) {\n\t\t\t\tvar validator = validators[i];\n\t\t\t\tif (!validator.validate(value)) {\n\t\t\t\t\thasError = true;\n\t\t\t\t\t_errorCodes.push(validator.errorMessageId);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !hasError;\n\t\t};\n\t\tthis.applyMask = function (newValue, oldValue) {\n\t\t\tvar maskingUtil = new MaskingUtil();\n\t\t\treturn maskingUtil.applyMask(this.displayHints.mask, newValue, oldValue);\n\t\t};\n\t\tthis.applyWildcardMask = function (newValue, oldValue) {\n\t\t\tvar maskingUtil = new MaskingUtil();\n\t\t\treturn maskingUtil.applyMask(this.displayHints.wildcardMask, newValue, oldValue);\n\t\t};\n\t\tthis.removeMask = function (value) {\n\t\t\tvar maskingUtil = new MaskingUtil();\n\t\t\treturn maskingUtil.removeMask(this.displayHints.mask, value);\n\t\t};\n\t};\n\n\tconnectsdk.PaymentProductField = PaymentProductField;\n\treturn PaymentProductField;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_15__, __WEBPACK_LOCAL_MODULE_35__], __WEBPACK_LOCAL_MODULE_36__ = ((function(connectsdk, BasicPaymentProduct, PaymentProductField) {\n\n\tvar _parseJSON = function (_json, _paymentProductFields, _paymentProductFieldById) {\n\t\tif (_json.fields) {\n\t\t\tfor (var i = 0, il = _json.fields.length; i < il; i++) {\n\t\t\t\tvar paymentProductField = new PaymentProductField(_json.fields[i]);\n\t\t\t\t_paymentProductFields.push(paymentProductField);\n\t\t\t\t_paymentProductFieldById[paymentProductField.id] = paymentProductField;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar PaymentProduct = function (json) {\n\t\tvar basicPaymentProduct = new BasicPaymentProduct(json);\n\t\tbasicPaymentProduct.json = json;\n\t\tbasicPaymentProduct.paymentProductFields = [];\n\t\tbasicPaymentProduct.paymentProductFieldById = {};\n\n\t\t_parseJSON(basicPaymentProduct.json, basicPaymentProduct.paymentProductFields, basicPaymentProduct.paymentProductFieldById);\n\n\t\treturn basicPaymentProduct;\n\t};\n\n\tconnectsdk.PaymentProduct = PaymentProduct;\n\treturn PaymentProduct;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_15__, __WEBPACK_LOCAL_MODULE_35__], __WEBPACK_LOCAL_MODULE_37__ = ((function(connectsdk, BasicPaymentProduct, PaymentProductField) {\n\n\tvar _parseJSON = function (_json, _paymentProductFields, _paymentProductFieldById) {\n\t\tif (_json.fields) {\n\t\t\tfor (var i = 0, il = _json.fields.length; i < il; i++) {\n\t\t\t\tvar paymentProductField = new PaymentProductField(_json.fields[i]);\n\t\t\t\t_paymentProductFields.push(paymentProductField);\n\t\t\t\t_paymentProductFieldById[paymentProductField.id] = paymentProductField;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar PaymentProductGroup = function (json) {\n\t\tvar basicPaymentProduct = new BasicPaymentProduct(json);\n\t\tbasicPaymentProduct.json = json;\n\t\tbasicPaymentProduct.json.type = \"group\";\n\t\tbasicPaymentProduct.paymentProductFields = [];\n\t\tbasicPaymentProduct.paymentProductFieldById = {};\n\n\t\t_parseJSON(basicPaymentProduct.json, basicPaymentProduct.paymentProductFields, basicPaymentProduct.paymentProductFieldById);\n\n\t\treturn basicPaymentProduct;\n\t};\n\n\tconnectsdk.PaymentProductGroup = PaymentProductGroup;\n\treturn PaymentProductGroup;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_15__], __WEBPACK_LOCAL_MODULE_38__ = ((function(connectsdk, BasicPaymentProduct) {\n\n\tvar _parseJson = function (_json, _paymentProducts, _accountsOnFile, _paymentProductById, _accountOnFileById, _paymentProductByAccountOnFileId) {\n\t\tif (_json.paymentProducts) {\n\t\t\tfor (var i = 0, il = _json.paymentProducts.length; i < il; i++) {\n\t\t\t\tvar paymentProduct = new BasicPaymentProduct(_json.paymentProducts[i]);\n\t\t\t\t_paymentProducts.push(paymentProduct);\n\t\t\t\t_paymentProductById[paymentProduct.id] = paymentProduct;\n\n\t\t\t\tif (paymentProduct.accountsOnFile) {\n\t\t\t\t\tvar aofs = paymentProduct.accountsOnFile;\n\t\t\t\t\tfor (var j = 0, jl = aofs.length; j < jl; j++) {\n\t\t\t\t\t\tvar aof = aofs[j];\n\t\t\t\t\t\t_accountsOnFile.push(aof);\n\t\t\t\t\t\t_accountOnFileById[aof.id] = aof;\n\t\t\t\t\t\t_paymentProductByAccountOnFileId[aof.id] = paymentProduct;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProducts = function (json) {\n\t\tthis.basicPaymentProducts = [];\n\t\tthis.basicPaymentProductById = {};\n\t\tthis.basicPaymentProductByAccountOnFileId = {};\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\tthis.json = json;\n\n\t\t_parseJson(json, this.basicPaymentProducts, this.accountsOnFile, this.basicPaymentProductById, this.accountOnFileById, this.basicPaymentProductByAccountOnFileId);\n\t};\n\n\tconnectsdk.BasicPaymentProducts = BasicPaymentProducts;\n\treturn BasicPaymentProducts;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_16__], __WEBPACK_LOCAL_MODULE_39__ = ((function(connectsdk, BasicPaymentProductGroup) {\n\n\tvar _parseJson = function (_json, _paymentProductGroups, _accountsOnFile, _paymentProductGroupById, _accountOnFileById) {\n\t\tif (_json.paymentProductGroups) {\n\t\t\tfor (var i = 0, il = _json.paymentProductGroups.length; i < il; i++) {\n\t\t\t\tvar paymentProductGroup = new BasicPaymentProductGroup(_json.paymentProductGroups[i]);\n\t\t\t\t_paymentProductGroups.push(paymentProductGroup);\n\t\t\t\t_paymentProductGroupById[paymentProductGroup.id] = paymentProductGroup;\n\n\t\t\t\tif (paymentProductGroup.accountsOnFile) {\n\t\t\t\t\tvar aofs = paymentProductGroup.accountsOnFile;\n\t\t\t\t\tfor (var j = 0, jl = aofs.length; j < jl; j++) {\n\t\t\t\t\t\tvar aof = aofs[j];\n\t\t\t\t\t\t_accountsOnFile.push(aof);\n\t\t\t\t\t\t_accountOnFileById[aof.id] = aof;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProductGroups = function (json) {\n\t\tthis.basicPaymentProductGroups = [];\n\t\tthis.basicPaymentProductGroupById = {};\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\tthis.json = json;\n\n\t\t_parseJson(json, this.basicPaymentProductGroups, this.accountsOnFile, this.basicPaymentProductGroupById, this.accountOnFileById);\n\t};\n\n\tconnectsdk.BasicPaymentProductGroups = BasicPaymentProductGroups;\n\treturn BasicPaymentProductGroups;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_40__ = ((function(connectsdk) {\n\t\"use strict\";\n\n\t\tvar _parseJson = function (_products, _groups, _basicPaymentItems) {\n\t\tvar doRemove = [];\n\t\tif (_groups) {\n\t\t\tfor (var i = 0, il = _groups.basicPaymentProductGroups.length; i < il; i++) {\n\t\t\t\tvar groupId = _groups.basicPaymentProductGroups[i].id,\n\t\t\t\t\t\tgroupReplaced = false;\n\t\t\t\tfor (var j = 0, jl = _products.basicPaymentProducts.length; j < jl; j++) {\n\t\t\t\t\tvar productMethod = _products.basicPaymentProducts[j].paymentProductGroup;\n\t\t\t\t\tif (productMethod === groupId && groupReplaced === false) {\n\t\t\t\t\t\t// replace instance by group\n\t\t\t\t\t\t_products.basicPaymentProducts.splice(j, 1, _groups.basicPaymentProductGroups[i]);\n\t\t\t\t\t\tgroupReplaced = true;\n\t\t\t\t\t} else if (productMethod === groupId && groupReplaced === true) {\n\t\t\t\t\t\t// mark for removal\n\t\t\t\t\t\tdoRemove.push(j);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i = doRemove.length -1, il = 0; i >= il; i--) {\n\t\t\t\t_products.basicPaymentProducts.splice(doRemove[i], 1);\n\t\t\t}\n\t\t}\n\t\t_basicPaymentItems.basicPaymentItems = JSON.parse(JSON.stringify(_products.basicPaymentProducts));\n\t\tfor (var i = 0, il = _basicPaymentItems.basicPaymentItems.length; i < il; i++) {\n\t\t\tvar basicPaymentItem = _basicPaymentItems.basicPaymentItems[i];\n\t\t\t_basicPaymentItems.basicPaymentItemById[basicPaymentItem.id] = basicPaymentItem;\n\t\t\tif (basicPaymentItem.accountsOnFile) {\n\t\t\t\tvar aofs = basicPaymentItem.accountsOnFile;\n\t\t\t\tfor (var j = 0, jl = aofs.length; j < jl; j++) {\n\t\t\t\t\tvar aof = aofs[j];\n\t\t\t\t\t_basicPaymentItems.accountsOnFile.push(aof);\n\t\t\t\t\t_basicPaymentItems.accountOnFileById[aof.id] = aof;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n\tvar BasicPaymentItems = function (products, groups) {\n\t\tthis.basicPaymentItems = [];\n\t\tthis.basicPaymentItemById = {};\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\t_parseJson(products, groups, this);\n\t};\n\tconnectsdk.BasicPaymentItems = BasicPaymentItems;\n\treturn BasicPaymentItems;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_41__ = ((function(connectsdk) {\n  var PaymentRequest = function(clientSessionID) {\n    var _clientSessionID = clientSessionID;\n    var _fieldValues = {};\n    var _paymentProduct = null;\n    var _accountOnFile = null;\n    var _tokenize = false;\n\n    this.isValid = function() {\n      var errors = this.getErrorMessageIds();\n      // besides checking the fields for errors check if all mandatory fields are present as well\n      var paymentProduct = this.getPaymentProduct();\n      if (!paymentProduct) {\n        return false;\n      }\n      var allRequiredFieldsPresent = true;\n      for (var i = 0; i < paymentProduct.paymentProductFields.length; i++) {\n        var field = paymentProduct.paymentProductFields[i];\n        if (field.dataRestrictions.isRequired) {\n          // is this field present in the request?\n          var storedValue = this.getValue(field.id);\n          if (!storedValue && !this.getAccountOnFile()) {\n              // if we have an acoount on file the account on file could have the field, so we can ignore it\n            allRequiredFieldsPresent = false;\n          }\n        }\n      }\n      return errors.length === 0 && allRequiredFieldsPresent;\n    };\n    this.setValue = function(paymentProductFieldId, value) {\n      _fieldValues[paymentProductFieldId] = value;\n    };\n    this.setTokenize = function(tokenize) {\n      _tokenize = tokenize;\n    };\n    this.getTokenize = function() {\n      return _tokenize;\n    };\n    this.getErrorMessageIds = function() {\n      var errors = [];\n      for (key in _fieldValues) {\n        var paymentProductField = _paymentProduct.paymentProductFieldById[key];\n        if (paymentProductField) {\n          errors = errors.concat(paymentProductField.getErrorCodes(_fieldValues[key]));\n        }\n      }\n      return errors;\n    };\n    this.getValue = function(paymentProductFieldId) {\n      return _fieldValues[paymentProductFieldId];\n    };\n    this.getValues = function() {\n      return _fieldValues;\n    };\n    this.getMaskedValue = function(paymentProductFieldId) {\n      var paymentProductField = _paymentProduct.paymentProductFieldById[paymentProductFieldId];\n      var maskedString = paymentProductField.applyMask(this.getValue(paymentProductFieldId));\n      return maskedString.formattedValue();\n    };\n    this.getMaskedValues = function() {\n      var fields = _fieldValues;\n      var result = [];\n      for (var paymentProductFieldId in fields) {\n        var paymentProductField = _paymentProduct.paymentProductFieldById[paymentProductFieldId];\n        var maskedString = paymentProductField.applyMask(this.getValue(paymentProductFieldId));\n        result[paymentProductFieldId] = maskedString.formattedValue;\n      }\n      return result;\n    };\n    this.getUnmaskedValues = function() {\n      var fields = _fieldValues;\n      var result = [];\n      for (var paymentProductFieldId in fields) {\n        var paymentProductField = _paymentProduct.paymentProductFieldById[paymentProductFieldId];\n        if (paymentProductField) {\n          var maskedString = paymentProductField.applyMask(this.getValue(paymentProductFieldId));\n          var formattedValue = maskedString.formattedValue;\n          result[paymentProductFieldId] = paymentProductField.removeMask(formattedValue);\n        }\n      }\n      return result;\n    };\n    this.setPaymentProduct = function(paymentProduct) {\n      if (paymentProduct.type === \"group\") {\n        return;\n      }\n      _paymentProduct = paymentProduct;\n    };\n    this.getPaymentProduct = function() {\n      return _paymentProduct;\n    };\n    this.setAccountOnFile = function(accountOnFile) {\n      for (var i = 0, il = accountOnFile.attributes.length; i < il; i++) {\n        var attribute = accountOnFile.attributes[i];\n        delete _fieldValues[attribute.key];\n      }\n      _accountOnFile = accountOnFile;\n    };\n    this.getAccountOnFile = function() {\n      return _accountOnFile;\n    };\n    this.getClientSessionID = function() {\n\t\t    return clientSessionID;\n    };\n  };\n  connectsdk.PaymentRequest = PaymentRequest;\n  return PaymentRequest;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_42__ = ((function(connectsdk) {\n\n    var C2SPaymentProductContext = function (payload) {\n        this.totalAmount = (payload.totalAmount === undefined) ? '' : payload.totalAmount;\n        this.countryCode = payload.countryCode;\n        this.isRecurring = (payload.isRecurring === undefined) ? '' : payload.isRecurring;\n        this.currency = payload.currency;\n        if (payload.locale !== undefined){\n            this.locale = payload.locale\n        }\n    };\n\n  connectsdk.C2SPaymentProductContext = C2SPaymentProductContext;\n  return C2SPaymentProductContext;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__], __WEBPACK_LOCAL_MODULE_43__ = ((function(connectsdk) {\n\n\tvar pki = forge.pki;\n\tvar asn1 = forge.asn1;\n\tvar CEKKEYLENGTH = 512;\n\tvar IVLENGTH = 128;\n\n\tvar base64UrlEncode = function(str) {\n\t\tstr = forge.util.encode64(str);\n\t\tstr = str.split('=')[0];\n\t\tstr = str.replace(/\\+/g, '-');\n\t\tstr = str.replace(/\\//g, '_');\n\t\treturn str;\n\t};\n\n\tvar createProtectedHeader = function(kid) {\n\t\tvar JOSEHeader = {\n\t\t\t\"alg\" : \"RSA-OAEP\",\n\t\t\t\"enc\" : \"A256CBC-HS512\",\n\t\t\t\"kid\" : kid\n\t\t};\n\t\treturn JSON.stringify(JOSEHeader);\n\t};\n\n\tvar decodePemPublicKey = function(publickeyB64Encoded) {\n\t\t// step 1: base64decode\n\t\tvar publickeyB64Decoded = forge.util.decode64(publickeyB64Encoded);\n\t\t// create a bytebuffer with these bytes\n\t\tvar buffer2 = forge.util.createBuffer(publickeyB64Decoded, 'raw');\n\t\t// convert DER to ASN1 object\n\t\tvar publickeyObject2 = forge.asn1.fromDer(buffer2);\n\t\t// convert to publicKey object\n\t\tvar publicKey2 = pki.publicKeyFromAsn1(publickeyObject2);\n\t\treturn publicKey2;\n\t};\n\n\tvar encryptContentEncryptionKey = function(CEK, publicKey) {\n\t\t// encrypt CEK with OAEP+SHA-1+MGF1Padding\n\t\tvar encryptedCEK = publicKey.encrypt(CEK, 'RSA-OAEP');\n\t\treturn encryptedCEK;\n\t};\n\n\tvar encryptPayload = function(payload, encKey, initializationVector) {\n\t\tvar cipher = forge.cipher.createCipher('AES-CBC', encKey);\n\t\tcipher.start({\n\t\t\tiv : initializationVector\n\t\t});\n\t\tcipher.update(forge.util.createBuffer(payload));\n\t\tcipher.finish();\n\t\treturn cipher.output.bytes();\n\t};\n\n\tvar calculateAdditionalAuthenticatedDataLength = function(encodededProtectedHeader) {\n\t\tvar buffer = forge.util.createBuffer(encodededProtectedHeader);\n\t\tvar lengthInBits = buffer.length() * 8;\n\n\t\tvar buffer2 = forge.util.createBuffer();\n\t\t// convert int to 64bit big endian\n\t\tbuffer2.putInt32(0);\n\t\tbuffer2.putInt32(lengthInBits);\n\t\treturn buffer2.bytes();\n\t};\n\n\tvar calculateHMAC = function(macKey, encodededProtectedHeader, initializationVector, cipherText, al) {\n\t\tvar buffer = forge.util.createBuffer();\n\t\tbuffer.putBytes(encodededProtectedHeader);\n\t\tbuffer.putBytes(initializationVector);\n\t\tbuffer.putBytes(cipherText);\n\t\tbuffer.putBytes(al);\n\n\t\tvar hmacInput = buffer.bytes();\n\n\t\tvar hmac = forge.hmac.create();\n\t\thmac.start(forge.sha512.create(), macKey);\n\t\thmac.update(hmacInput);\n\t\treturn hmac.digest().bytes();\n\t};\n\n\tvar JOSEEncryptor = function() {\n\n\t\tthis.encrypt = function(plainTextValues, publicKeyResponse) {\n\t\t\t// Create protected header and encode it with Base64 encoding\n\t\t\tvar payload = JSON.stringify(plainTextValues);\n\t\t\tvar protectedHeader = createProtectedHeader(publicKeyResponse.keyId);\n\t\t\tvar encodededProtectedHeader = base64UrlEncode(protectedHeader);\n\n\t\t\t// Create ContentEncryptionKey, is a random byte[]\n\t\t\tvar CEK = forge.random.getBytesSync(CEKKEYLENGTH / 8);\n\t\t\tvar publicKey = decodePemPublicKey(publicKeyResponse.publicKey);\n\n\t\t\t// Encrypt the contentEncryptionKey with the GC gateway publickey and encode it with Base64 encoding\n\t\t\tvar encryptedContentEncryptionKey = encryptContentEncryptionKey(CEK, publicKey);\n\t\t\tvar encodedEncryptedContentEncryptionKey = base64UrlEncode(encryptedContentEncryptionKey);\n\n\t\t\t// Split the contentEncryptionKey in ENC_KEY and MAC_KEY for using hmac\n\t\t\tvar macKey = CEK.substring(0, CEKKEYLENGTH / 2 / 8);\n\t\t\tvar encKey = CEK.substring(CEKKEYLENGTH / 2 / 8);\n\n\t\t\t// Create Initialization Vector\n\t\t\tvar initializationVector = forge.random.getBytesSync(IVLENGTH / 8);\n\t\t\tvar encodededinitializationVector = base64UrlEncode(initializationVector);\n\n\t\t\t// Encrypt content with ContentEncryptionKey and Initialization Vector\n\t\t\tvar cipherText = encryptPayload(payload, encKey, initializationVector);\n\t\t\tvar encodedCipherText = base64UrlEncode(cipherText);\n\n\t\t\t// Create Additional Authenticated Data  and Additional Authenticated Data Length\n\t\t\tvar al = calculateAdditionalAuthenticatedDataLength(encodededProtectedHeader);\n\n\t\t\t// Calculates HMAC\n\t\t\tvar calculatedHmac = calculateHMAC(macKey, encodededProtectedHeader, initializationVector, cipherText, al);\n\n\t\t\t// Truncate HMAC Value to Create Authentication Tag\n\t\t\tvar authenticationTag = calculatedHmac.substring(0, calculatedHmac.length / 2);\n\t\t\tvar encodedAuthenticationTag = base64UrlEncode(authenticationTag);\n\n\t\t\treturn encodededProtectedHeader + \".\" + encodedEncryptedContentEncryptionKey + \".\" + encodededinitializationVector + \".\" + encodedCipherText + \".\" + encodedAuthenticationTag;\n\t\t};\n\t};\n\n\tconnectsdk.JOSEEncryptor = JOSEEncryptor;\n\treturn JOSEEncryptor;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_1__, __WEBPACK_LOCAL_MODULE_43__], __WEBPACK_LOCAL_MODULE_44__ = ((function(connectsdk, Promise, JOSEEncryptor) {\n\n\tvar Encryptor = function(publicKeyResponsePromise) {\n\t\tthis.encrypt = function(paymentRequest) {\n\t\t\tvar promise = new Promise();\n\t\t\tvar encryptedString = '';\n\t\t\tpublicKeyResponsePromise.then(function (publicKeyResponse) {\n\t\t\t\tif (paymentRequest.isValid()) {\n\t\t\t\t    \n\t\t\t\t\tvar blob = {\n\t\t\t\t\t   clientSessionId: paymentRequest.getClientSessionID()\n\t\t\t\t\t   ,nonce: forge.util.bytesToHex(forge.random.getBytesSync(16))\n\t\t\t\t\t   ,paymentProductId: paymentRequest.getPaymentProduct().id\n                       ,tokenize: paymentRequest.getTokenize()\n                    };\n                    \n\t\t\t\t\tif (paymentRequest.getAccountOnFile()) {\n                        blob[\"accountOnFileId\"] = paymentRequest.getAccountOnFile().id;\n                    }\n                    \n                    var paymentValues = [], values = paymentRequest.getUnmaskedValues();\n                    var ownValues = Object.getOwnPropertyNames(values);\n\t\t\t\t\tfor (var i = 0; i < ownValues.length; i++) {\n\t\t\t\t\t\tvar propertyName = ownValues[i];\n\t\t\t\t\t\tif (propertyName !== \"length\") {\n\t\t\t\t\t\t\tpaymentValues.push({\n\t\t\t\t\t\t\t\tkey: propertyName,\n\t\t\t\t\t\t\t\tvalue: values[propertyName]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                    blob[\"paymentValues\"] = paymentValues;\n\t\t\t\t\t\n\t\t\t\t\t// use blob to encrypt\n\t\t\t\t\tvar joseEncryptor = new JOSEEncryptor();\n\t\t\t\t\tencryptedString = joseEncryptor.encrypt(blob, publicKeyResponse);\n\t\t\t\t\tpromise.resolve(encryptedString);\n\t\t\t\t} else {\n\t\t\t\t\tpromise.reject(paymentRequest.getErrorMessageIds());\n\t\t\t\t}\n\t\t\t}, function (error) {\n\t\t\t\tpromise.reject(error);\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\t};\n\n\tconnectsdk.Encryptor = Encryptor;\n\treturn Encryptor;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_0__, __WEBPACK_LOCAL_MODULE_9__, __WEBPACK_LOCAL_MODULE_7__, __WEBPACK_LOCAL_MODULE_8__, __WEBPACK_LOCAL_MODULE_1__, __WEBPACK_LOCAL_MODULE_42__, __WEBPACK_LOCAL_MODULE_38__, __WEBPACK_LOCAL_MODULE_39__, __WEBPACK_LOCAL_MODULE_36__, __WEBPACK_LOCAL_MODULE_37__, __WEBPACK_LOCAL_MODULE_40__, __WEBPACK_LOCAL_MODULE_41__, __WEBPACK_LOCAL_MODULE_44__], __WEBPACK_AMD_DEFINE_RESULT__ = (function (connectsdk, C2SCommunicator, C2SCommunicatorConfiguration, IinDetailsResponse, Promise, C2SPaymentProductContext, BasicPaymentProducts, BasicPaymentProductGroups, PaymentProduct, PaymentProductGroup, BasicPaymentItems, PaymentRequest, Encryptor) {\n\tvar APIVERSION = \"client/v1\";\n\tvar session = function (sessionDetails, paymentProduct) {\n\n\t\tvar _c2SCommunicatorConfiguration = new C2SCommunicatorConfiguration(sessionDetails, APIVERSION),\n\t\t\t_c2sCommunicator = new C2SCommunicator(_c2SCommunicatorConfiguration, paymentProduct),\n\t\t\t_session = this,\n\t\t\t_paymentProductId, _paymentProduct, _paymentRequestPayload, _paymentRequest, _paymentProductGroupId, _paymentProductGroup;\n\t\tthis.clientApiUrl = _c2SCommunicatorConfiguration.clientApiUrl;\n\t\tthis.assetUrl = _c2SCommunicatorConfiguration.assetUrl;\n\n\t\tthis.getBasicPaymentProducts = function (paymentRequestPayload, paymentProductSpecificInputs) {\n\t\t\tvar promise = new Promise();\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(paymentRequestPayload);\n\t\t\t_c2sCommunicator.getBasicPaymentProducts(c2SPaymentProductContext, paymentProductSpecificInputs).then(function (json) {\n\t\t\t\t_paymentRequestPayload = paymentRequestPayload;\n\t\t\t\tvar paymentProducts = new BasicPaymentProducts(json);\n\t\t\t\tpromise.resolve(paymentProducts);\n\t\t\t}, function () {\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getBasicPaymentProductGroups = function (paymentRequestPayload) {\n\t\t\tvar promise = new Promise();\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(paymentRequestPayload);\n\t\t\t_c2sCommunicator.getBasicPaymentProductGroups(c2SPaymentProductContext).then(function (json) {\n\t\t\t\t_paymentRequestPayload = paymentRequestPayload;\n\t\t\t\tvar paymentProductGroups = new BasicPaymentProductGroups(json);\n\t\t\t\tpromise.resolve(paymentProductGroups);\n\t\t\t}, function () {\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getBasicPaymentItems = function (paymentRequestPayload, useGroups, paymentProductSpecificInputs) {\n\t\t\tvar promise = new Promise();\n\t\t\t// get products & groups\n\t\t\tif (useGroups) {\n\t\t\t\t_session.getBasicPaymentProducts(paymentRequestPayload, paymentProductSpecificInputs).then(function (products) {\n\t\t\t\t\t_session.getBasicPaymentProductGroups(paymentRequestPayload).then(function (groups) {\n\t\t\t\t\t\tvar basicPaymentItems = new BasicPaymentItems(products, groups);\n\t\t\t\t\t\tpromise.resolve(basicPaymentItems);\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t});\n\t\t\t\t}, function () {\n\t\t\t\t\tpromise.reject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t_session.getBasicPaymentProducts(paymentRequestPayload, paymentProductSpecificInputs).then(function (products) {\n\t\t\t\t\tvar basicPaymentItems = new BasicPaymentItems(products, null);\n\t\t\t\t\tpromise.resolve(basicPaymentItems);\n\t\t\t\t}, function () {\n\t\t\t\t\tpromise.reject();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProduct = function (paymentProductId, paymentRequestPayload, paymentProductSpecificInputs) {\n\t\t\tvar promise = new Promise();\n\t\t\t_paymentProductId = paymentProductId;\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(_paymentRequestPayload || paymentRequestPayload);\n\t\t\t_c2sCommunicator.getPaymentProduct(paymentProductId, c2SPaymentProductContext, paymentProductSpecificInputs).then(function (response) {\n\t\t\t\t_paymentProduct = new PaymentProduct(response);\n\t\t\t\tpromise.resolve(_paymentProduct);\n\t\t\t}, function () {\n\t\t\t\t_paymentProduct = null;\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductGroup = function (paymentProductGroupId, paymentRequestPayload) {\n\t\t\tvar promise = new Promise();\n\t\t\t_paymentProductGroupId = paymentProductGroupId;\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(_paymentRequestPayload || paymentRequestPayload);\n\t\t\t_c2sCommunicator.getPaymentProductGroup(paymentProductGroupId, c2SPaymentProductContext).then(function (response) {\n\t\t\t\t_paymentProductGroup = new PaymentProductGroup(response);\n\t\t\t\tpromise.resolve(_paymentProductGroup);\n\t\t\t}, function () {\n\t\t\t\t_paymentProductGroup = null;\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getIinDetails = function (partialCreditCardNumber, paymentRequestPayload) {\n\t\t\tpartialCreditCardNumber = partialCreditCardNumber.replace(/ /g, '').substring(0, 6);\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(_paymentRequestPayload || paymentRequestPayload);\n\t\t\treturn _c2sCommunicator.getPaymentProductIdByCreditCardNumber(partialCreditCardNumber, c2SPaymentProductContext);\n\t\t};\n\n\t\tthis.getPublicKey = function () {\n\t\t\treturn _c2sCommunicator.getPublicKey();\n\t\t};\n\n\t\tthis.getPaymentProductPublicKey = function (paymentProductId) {\n\t\t\treturn _c2sCommunicator.getPaymentProductPublicKey(paymentProductId);\n\t\t};\n\n\t\tthis.getPaymentProductNetworks = function (paymentProductId, paymentRequestPayload) {\n\t\t\tvar promise = new Promise();\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(paymentRequestPayload);\n\t\t\t_c2sCommunicator.getPaymentProductNetworks(paymentProductId, c2SPaymentProductContext).then(function (response) {\n\t\t\t\t_paymentRequestPayload = paymentRequestPayload;\n\t\t\t\tpromise.resolve(response);\n\t\t\t}, function () {\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductDirectory = function (paymentProductId, currencyCode, countryCode) {\n\t\t\treturn _c2sCommunicator.getPaymentProductDirectory(paymentProductId, currencyCode, countryCode);\n\t\t};\n\n\t\tthis.convertAmount = function (amount, source, target) {\n\t\t\treturn _c2sCommunicator.convertAmount(amount, source, target);\n\t\t};\n\n\t\tthis.getPaymentRequest = function () {\n\t\t\tif (!_paymentRequest) {\n\t\t\t\t_paymentRequest = new PaymentRequest(_c2SCommunicatorConfiguration.clientSessionId);\n\t\t\t}\n\t\t\treturn _paymentRequest;\n\t\t};\n\n\t\tthis.getEncryptor = function () {\n\t\t\tvar publicKeyResponsePromise = _c2sCommunicator.getPublicKey();\n\t\t\treturn new Encryptor(publicKeyResponsePromise);\n\t\t};\n\n\t\tthis.getThirdPartyPaymentStatus = function (paymentId) {\n\t\t\tvar promise = new Promise();\n\t\t\t_c2sCommunicator.getThirdPartyPaymentStatus(paymentId).then(function (response) {\n\t\t\t\tpromise.resolve(response);\n\t\t\t}, function () {\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getCustomerDetails = function (paymentProductId, paymentRequestPayload) {\n\t\t\treturn _c2sCommunicator.getCustomerDetails(paymentProductId, paymentRequestPayload);\n\t\t};\n\t};\n\tconnectsdk.Session = session;\n\treturn session;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./node_modules/connect-sdk-client-js/dist/connectsdk.noEncrypt.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?");

/***/ })

/******/ });